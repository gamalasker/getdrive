<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DÃ©fi Express - Ù„ØºØ² ÙˆÙØ±ØµØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Poppins:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Cairo', 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .card {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .option-btn {
            transition: all 0.3s ease;
            transform: translateY(0);
        }
        
        .option-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .correct {
            background: linear-gradient(135deg, #4ade80, #22c55e) !important;
            color: white !important;
        }
        
        .incorrect {
            background: linear-gradient(135deg, #f87171, #ef4444) !important;
            color: white !important;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .progress-bar {
            transition: width 0.3s ease;
        }
        
        .flag-icon {
            background: linear-gradient(135deg, #0055a4, #ffffff, #ef4135);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-4xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl md:text-6xl font-bold text-white mb-2" dir="ltr">
                ğŸ‡«ğŸ‡· DÃ©fi Express
            </h1>
            <p class="text-xl text-white/90">Ù„ØºØ² ÙˆÙØ±ØµØ© - <span dir="ltr" class="inline-block">Puzzle et OpportunitÃ©</span></p>
        </div>

        <!-- Main Game Container -->
        <div id="gameContainer" class="card rounded-3xl shadow-2xl p-8">
            <!-- Menu Screen -->
            <div id="menuScreen" class="text-center">
                <div class="mb-8">
                    <div class="text-6xl mb-4">ğŸ¯</div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-4">Ø§Ø®ØªØ± Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</h2>
                    <p class="text-gray-600" dir="ltr">Choisissez votre dÃ©fi</p>
                </div>

                <!-- Category Selection -->
                <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 mb-8">
                    <div class="category-card p-4 rounded-2xl bg-gradient-to-br from-orange-100 to-orange-200 cursor-pointer hover:shadow-lg transition-all" data-category="achats" onclick="selectCategory('achats', this)">
                        <div class="text-3xl mb-2">ğŸ›ï¸</div>
                        <h3 class="text-lg font-semibold text-gray-800">Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</h3>
                        <p class="text-gray-600 text-xs" dir="ltr">Les achats</p>
                    </div>
                    
                    <div class="category-card p-4 rounded-2xl bg-gradient-to-br from-red-100 to-red-200 cursor-pointer hover:shadow-lg transition-all" data-category="cuisine" onclick="selectCategory('cuisine', this)">
                        <div class="text-3xl mb-2">ğŸ½ï¸</div>
                        <h3 class="text-lg font-semibold text-gray-800">Ø§Ù„Ø·Ø¨Ø®</h3>
                        <p class="text-gray-600 text-xs" dir="ltr">La cuisine</p>
                    </div>
                    
                    <div class="category-card p-4 rounded-2xl bg-gradient-to-br from-blue-100 to-blue-200 cursor-pointer hover:shadow-lg transition-all" data-category="deplacements" onclick="selectCategory('deplacements', this)">
                        <div class="text-3xl mb-2">ğŸš¶â€â™‚ï¸</div>
                        <h3 class="text-lg font-semibold text-gray-800">Ø§Ù„ØªÙ†Ù‚Ù„</h3>
                        <p class="text-gray-600 text-xs" dir="ltr">DÃ©placements</p>
                    </div>
                    
                    <div class="category-card p-4 rounded-2xl bg-gradient-to-br from-green-100 to-green-200 cursor-pointer hover:shadow-lg transition-all" data-category="sante" onclick="selectCategory('sante', this)">
                        <div class="text-3xl mb-2">ğŸ¥</div>
                        <h3 class="text-lg font-semibold text-gray-800">Ø§Ù„ØµØ­Ø©</h3>
                        <p class="text-gray-600 text-xs" dir="ltr">La santÃ©</p>
                    </div>
                    
                    <div class="category-card p-4 rounded-2xl bg-gradient-to-br from-purple-100 to-purple-200 cursor-pointer hover:shadow-lg transition-all" data-category="maison" onclick="selectCategory('maison', this)">
                        <div class="text-3xl mb-2">ğŸ </div>
                        <h3 class="text-lg font-semibold text-gray-800">Ø§Ù„Ù…Ù†Ø²Ù„</h3>
                        <p class="text-gray-600 text-xs" dir="ltr">La maison</p>
                    </div>
                    
                    <div class="category-card p-4 rounded-2xl bg-gradient-to-br from-yellow-100 to-yellow-200 cursor-pointer hover:shadow-lg transition-all" data-category="temps" onclick="selectCategory('temps', this)">
                        <div class="text-3xl mb-2">ğŸ•’</div>
                        <h3 class="text-lg font-semibold text-gray-800">Ø§Ù„Ø·Ù‚Ø³ ÙˆØ§Ù„ÙˆÙ‚Øª</h3>
                        <p class="text-gray-600 text-xs" dir="ltr">Temps & mÃ©tÃ©o</p>
                    </div>
                    
                    <div class="category-card p-4 rounded-2xl bg-gradient-to-br from-indigo-100 to-indigo-200 cursor-pointer hover:shadow-lg transition-all" data-category="ecole" onclick="selectCategory('ecole', this)">
                        <div class="text-3xl mb-2">ğŸ“</div>
                        <h3 class="text-lg font-semibold text-gray-800">Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</h3>
                        <p class="text-gray-600 text-xs" dir="ltr">L'Ã©cole</p>
                    </div>
                    
                    <div class="category-card p-4 rounded-2xl bg-gradient-to-br from-pink-100 to-pink-200 cursor-pointer hover:shadow-lg transition-all" data-category="famille" onclick="selectCategory('famille', this)">
                        <div class="text-3xl mb-2">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
                        <h3 class="text-lg font-semibold text-gray-800">Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©</h3>
                        <p class="text-gray-600 text-xs" dir="ltr">La famille</p>
                    </div>
                    
                    <div class="category-card p-4 rounded-2xl bg-gradient-to-br from-gray-100 to-gray-200 cursor-pointer hover:shadow-lg transition-all" data-category="travail" onclick="selectCategory('travail', this)">
                        <div class="text-3xl mb-2">ğŸ‘”</div>
                        <h3 class="text-lg font-semibold text-gray-800">Ø§Ù„Ø¹Ù…Ù„</h3>
                        <p class="text-gray-600 text-xs" dir="ltr">Le travail</p>
                    </div>
                    
                    <div class="category-card p-4 rounded-2xl bg-gradient-to-br from-teal-100 to-teal-200 cursor-pointer hover:shadow-lg transition-all" data-category="voyage" onclick="selectCategory('voyage', this)">
                        <div class="text-3xl mb-2">ğŸ§³</div>
                        <h3 class="text-lg font-semibold text-gray-800">Ø§Ù„Ø³ÙØ±</h3>
                        <p class="text-gray-600 text-xs" dir="ltr">Le voyage</p>
                    </div>
                    
                    <div class="category-card p-4 rounded-2xl bg-gradient-to-br from-cyan-100 to-cyan-200 cursor-pointer hover:shadow-lg transition-all" data-category="technologie" onclick="selectCategory('technologie', this)">
                        <div class="text-3xl mb-2">ğŸ“±</div>
                        <h3 class="text-lg font-semibold text-gray-800">Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§</h3>
                        <p class="text-gray-600 text-xs" dir="ltr">Technologie</p>
                    </div>
                    
                    <div class="category-card p-4 rounded-2xl bg-gradient-to-br from-emerald-100 to-emerald-200 cursor-pointer hover:shadow-lg transition-all" data-category="loisirs" onclick="selectCategory('loisirs', this)">
                        <div class="text-3xl mb-2">ğŸ‰</div>
                        <h3 class="text-lg font-semibold text-gray-800">Ø§Ù„ØªØ±ÙÙŠÙ‡</h3>
                        <p class="text-gray-600 text-xs" dir="ltr">Les loisirs</p>
                    </div>
                </div>

                <!-- Level Selection -->
                <div class="mb-8">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ / <span dir="ltr" class="inline-block">Niveau</span></h3>
                    <div class="flex justify-center flex-wrap gap-4 mb-6">
                        <button class="level-btn px-6 py-3 rounded-xl bg-green-500 text-white font-semibold hover:bg-green-600 transition-all" data-level="debutant" onclick="selectLevel('debutant', this)">
                            ğŸŒ± Ù…Ø¨ØªØ¯Ø¦
                        </button>
                        <button class="level-btn px-6 py-3 rounded-xl bg-yellow-500 text-white font-semibold hover:bg-yellow-600 transition-all" data-level="intermediaire" onclick="selectLevel('intermediaire', this)">
                            ğŸ” Ù…ØªÙˆØ³Ø·
                        </button>
                        <button class="level-btn px-6 py-3 rounded-xl bg-red-500 text-white font-semibold hover:bg-red-600 transition-all" data-level="expert" onclick="selectLevel('expert', this)">
                            ğŸ§  Ø®Ø¨ÙŠØ±
                        </button>
                    </div>
                    
                    <!-- Start Game Button -->
                    <div class="text-center">
                        <button id="startGameBtn" class="px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all opacity-50 cursor-not-allowed" disabled>
                            ğŸ® Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©
                        </button>
                        <p class="text-sm text-gray-500 mt-2">Ø§Ø®ØªØ± ÙØ¦Ø© ÙˆÙ…Ø³ØªÙˆÙ‰ Ù„Ù„Ø¨Ø¯Ø¡</p>
                    </div>
                </div>

                <!-- Stats Display -->
                <div class="bg-gray-50 rounded-2xl p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙƒ</h3>
                    <div class="grid grid-cols-3 gap-4 text-center">
                        <div>
                            <div class="text-2xl font-bold text-blue-600" id="totalScore">0</div>
                            <div class="text-sm text-gray-600">Ø§Ù„Ù†Ù‚Ø§Ø·</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-green-600" id="correctAnswers">0</div>
                            <div class="text-sm text-gray-600">Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø©</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-purple-600" id="gamesPlayed">0</div>
                            <div class="text-sm text-gray-600">Ø£Ù„Ø¹Ø§Ø¨</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Game Screen -->
            <div id="gameScreen" class="hidden">
                <!-- Game Header -->
                <div class="flex justify-between items-center mb-6">
                    <div class="text-right">
                        <div class="text-lg font-bold text-blue-600" id="currentScore">0 Ù†Ù‚Ø·Ø©</div>
                        <div class="text-sm text-gray-600">Ø³Ø¤Ø§Ù„ <span id="questionNumber">1</span>/10</div>
                    </div>
                    <div class="text-center">
                        <div class="text-lg font-semibold text-gray-800" id="categoryDisplay"></div>
                        <div class="text-sm text-gray-600" id="levelDisplay"></div>
                    </div>
                    <button onclick="backToMenu()" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-all">
                        â†’ Ø±Ø¬ÙˆØ¹
                    </button>
                </div>

                <!-- Progress Bar -->
                <div class="w-full bg-gray-200 rounded-full h-3 mb-8">
                    <div class="progress-bar bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full" id="progressBar" style="width: 10%"></div>
                </div>

                <!-- Question Card -->
                <div class="bg-white rounded-2xl p-8 shadow-lg mb-6 fade-in" id="questionCard">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-4" id="questionIcon">ğŸ¤”</div>
                        <h2 class="text-2xl font-bold text-gray-800 mb-2" id="questionText" dir="ltr" style="text-align: left;"></h2>
                        <button onclick="speakQuestion()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all">
                            ğŸ”Š Ø§Ø³ØªÙ…Ø¹
                        </button>
                    </div>

                    <!-- Timer -->
                    <div class="text-center mb-6">
                        <div class="inline-block bg-red-100 rounded-full px-4 py-2">
                            <span class="text-red-600 font-bold">Ø«Ø§Ù†ÙŠØ© <span id="timer">30</span> â°</span>
                        </div>
                    </div>

                    <!-- Options -->
                    <div class="grid gap-4" id="optionsContainer">
                        <!-- Options will be inserted here -->
                    </div>
                </div>

                <!-- Hint Button -->
                <div class="text-center">
                    <button onclick="showHint()" class="px-6 py-3 bg-yellow-500 text-white rounded-xl hover:bg-yellow-600 transition-all" id="hintBtn">
                        ğŸ’¡ ØªÙ„Ù…ÙŠØ­ (-5 Ù†Ù‚Ø§Ø·)
                    </button>
                </div>
            </div>

            <!-- Result Screen -->
            <div id="resultScreen" class="hidden text-center">
                <div class="mb-8">
                    <div class="text-8xl mb-4" id="resultIcon"></div>
                    <h2 class="text-3xl font-bold mb-2" id="resultTitle"></h2>
                    <p class="text-gray-600 text-lg" id="resultMessage"></p>
                </div>

                <!-- Explanation -->
                <div class="bg-blue-50 rounded-2xl p-6 mb-8" id="explanationCard">
                    <h3 class="text-lg font-semibold text-blue-800 mb-2">ğŸ’¡ Ø´Ø±Ø­</h3>
                    <p class="text-blue-700" id="explanationText" dir="ltr" style="text-align: left;"></p>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-4 justify-center">
                    <button onclick="backToMenu()" class="px-8 py-3 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all font-semibold">
                        Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                    </button>
                    <button onclick="nextQuestion()" class="px-8 py-3 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-all font-semibold" id="nextBtn">
                        â† Ø§Ù„ØªØ§Ù„ÙŠ
                    </button>
                </div>
            </div>

            <!-- Final Score Screen -->
            <div id="finalScreen" class="hidden text-center">
                <div class="mb-8">
                    <div class="text-8xl mb-4">ğŸ†</div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!</h2>
                    <p class="text-gray-600" dir="ltr">Partie terminÃ©e!</p>
                </div>

                <!-- Final Stats -->
                <div class="bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl p-8 mb-8">
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="text-center">
                            <div class="text-4xl font-bold text-blue-600" id="finalScore">0</div>
                            <div class="text-gray-600">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‚Ø§Ø·</div>
                        </div>
                        <div class="text-center">
                            <div class="text-4xl font-bold text-green-600" id="finalCorrect">0</div>
                            <div class="text-gray-600">Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø©</div>
                        </div>
                        <div class="text-center">
                            <div class="text-4xl font-bold text-purple-600" id="finalPercentage">0%</div>
                            <div class="text-gray-600">Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ø¬Ø§Ø­</div>
                        </div>
                    </div>
                </div>

                <!-- Badges -->
                <div class="mb-8" id="badgesContainer">
                    <!-- Badges will be shown here -->
                </div>

                <button onclick="playAgain()" class="px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl hover:shadow-lg transition-all font-semibold text-lg">
                    ğŸ® Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
                </button>
            </div>
        </div>
    </div>

    <script>
        // Game State
        let gameState = {
            currentCategory: '',
            currentLevel: '',
            currentQuestion: 0,
            score: 0,
            correctAnswers: 0,
            totalQuestions: 10,
            questions: [],
            timer: null,
            timeLeft: 30,
            hintsUsed: 0
        };

        // Load stats from localStorage
        function loadStats() {
            const stats = JSON.parse(localStorage.getItem('defiExpressStats') || '{"totalScore": 0, "correctAnswers": 0, "gamesPlayed": 0}');
            document.getElementById('totalScore').textContent = stats.totalScore;
            document.getElementById('correctAnswers').textContent = stats.correctAnswers;
            document.getElementById('gamesPlayed').textContent = stats.gamesPlayed;
            return stats;
        }

        // Save stats to localStorage
        function saveStats(newScore, newCorrect) {
            const stats = loadStats();
            stats.totalScore += newScore;
            stats.correctAnswers += newCorrect;
            stats.gamesPlayed += 1;
            localStorage.setItem('defiExpressStats', JSON.stringify(stats));
            loadStats();
        }

        // --- NEW EXTENDED QUESTION DATABASE ---
        const questionDatabase = {
            achats: {
                debutant: [
                    { question: "Au supermarchÃ©, on met les courses dans un...", options: ["caddie", "frigo", "lit"], correct: 0, explanation: "Le caddie (Ø£Ùˆ Ø§Ù„Ø¹Ø±Ø¨Ø©) sert Ã  transporter les courses dans un supermarchÃ©.", icon: "ğŸ›’" },
                    { question: "Pour payer, on utilise de l'... ou une carte.", options: ["eau", "argent", "air"], correct: 1, explanation: "L'argent (Ø§Ù„Ù…Ø§Ù„) ou la carte bancaire sont les moyens de paiement.", icon: "ğŸ’³" },
                    { question: "Les vÃªtements, on les achÃ¨te dans un...", options: ["magasin", "jardin", "nuage"], correct: 0, explanation: "On achÃ¨te les vÃªtements dans un magasin (Ù…Ø­Ù„).", icon: "ğŸ‘•" },
                    { question: "OÃ¹ achÃ¨te-t-on du pain ?", options: ["Ã  la boucherie", "Ã  la boulangerie", "Ã  la pharmacie"], correct: 1, explanation: "On achÃ¨te le pain Ã  la boulangerie (Ø§Ù„Ù…Ø®Ø¨Ø²).", icon: "ğŸ¥–" },
                    { question: "Le document qu'on reÃ§oit aprÃ¨s avoir payÃ© est un...", options: ["ticket de caisse", "livre", "journal"], correct: 0, explanation: "Le ticket de caisse (Ø§Ù„Ø¥ÙŠØµØ§Ù„) est la preuve de l'achat.", icon: "ğŸ§¾" }
                ],
                intermediaire: [
                    { question: "Que signifie 'faire les soldes' ?", options: ["vendre la maison", "acheter des articles Ã  prix rÃ©duit", "partir en vacances"], correct: 1, explanation: "'Faire les soldes' signifie profiter des rÃ©ductions (Ø§Ù„ØªØ®ÙÙŠØ¶Ø§Øª).", icon: "ğŸ·ï¸" },
                    { question: "Si un article est trop cher, on peut dire : 'C'est hors de...'", options: ["prix", "question", "danger"], correct: 0, explanation: "'Hors de prix' est une expression pour dire que quelque chose est trÃ¨s cher (Ø¨Ø§Ù‡Ø¸ Ø§Ù„Ø«Ù…Ù†).", icon: "ğŸ’¸" },
                    { question: "Comment appelle-t-on la personne qui travaille Ã  la caisse ?", options: ["le caissier / la caissiÃ¨re", "le vendeur / la vendeuse", "le client / la cliente"], correct: 0, explanation: "Le caissier ou la caissiÃ¨re (Ø£Ù…ÙŠÙ† Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚) enregistre et encaisse les achats.", icon: "ğŸ§‘â€ğŸ’¼" },
                    { question: "OÃ¹ peut-on essayer un vÃªtement dans un magasin ?", options: ["dans la rÃ©serve", "dans la cabine d'essayage", "Ã  la caisse"], correct: 1, explanation: "La cabine d'essayage (ØºØ±ÙØ© Ø§Ù„Ù‚ÙŠØ§Ø³) est l'endroit pour essayer les vÃªtements.", icon: "ğŸšª" }
                ],
                expert: [
                    { question: "Que signifie l'acronyme 'TTC' sur un prix ?", options: ["TrÃ¨s TrÃ¨s Cher", "Toutes Taxes Comprises", "Transport Tarif Compris"], correct: 1, explanation: "'TTC' signifie 'Toutes Taxes Comprises', incluant la TVA (Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ©).", icon: "ğŸ’¶" },
                    { question: "Quel est le dÃ©lai lÃ©gal de rÃ©tractation pour un achat en ligne en France ?", options: ["7 jours", "14 jours", "30 jours"], correct: 1, explanation: "La loi Hamon garantit un dÃ©lai de rÃ©tractation (ÙØªØ±Ø© Ø§Ù„ØªØ±Ø§Ø¬Ø¹) de 14 jours pour les achats en ligne.", icon: "âš–ï¸" },
                    { question: "Comment appelle-t-on le fait de regarder les vitrines sans acheter ?", options: ["le lÃ¨che-vitrines", "le lÃ¨che-bottes", "le lÃ¨che-plats"], correct: 0, explanation: "'Faire du lÃ¨che-vitrines' (Ø§Ù„ØªÙØ±Ø¬ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª) est une expression populaire.", icon: "ğŸ‘€" }
                ]
            },
            cuisine: {
                debutant: [
                    { question: "Pour faire une omelette, il faut des...", options: ["Å“ufs", "pommes", "chaussures"], correct: 0, explanation: "Les Å“ufs (Ø§Ù„Ø¨ÙŠØ¶) sont l'ingrÃ©dient principal de l'omelette.", icon: "ğŸ³" },
                    { question: "On coupe les lÃ©gumes avec un...", options: ["couteau", "verre", "livre"], correct: 0, explanation: "On utilise un couteau (Ø³ÙƒÙŠÙ†) pour couper les aliments.", icon: "ğŸ”ª" },
                    { question: "Le plat principal de la France est...", options: ["le couscous", "la pizza", "le bÅ“uf bourguignon"], correct: 2, explanation: "Le bÅ“uf bourguignon (Ù„Ø­Ù… Ø§Ù„Ø¨Ù‚Ø± Ø¨Ø§Ù„Ø¨ÙˆØ±ØºÙŠÙ†ÙŠÙˆÙ†) est un plat traditionnel franÃ§ais trÃ¨s connu.", icon: "ğŸ²" },
                    { question: "Quel ustensile utilise-t-on pour manger de la soupe ?", options: ["une fourchette", "une cuillÃ¨re", "un couteau"], correct: 1, explanation: "On mange la soupe avec une cuillÃ¨re (Ù…Ù„Ø¹Ù‚Ø©).", icon: "ğŸ¥£" }
                ],
                intermediaire: [
                    { question: "Que veut dire 'faire revenir' des oignons ?", options: ["les faire bouillir", "les cuire dans la graisse chaude", "les manger crus"], correct: 1, explanation: "'Faire revenir' (ØªØ´ÙˆÙŠØ­) signifie cuire rapidement dans une matiÃ¨re grasse.", icon: "ğŸ§…" },
                    { question: "Quel fromage est cÃ©lÃ¨bre pour ses trous ?", options: ["le roquefort", "le camembert", "l'emmental"], correct: 2, explanation: "L'emmental (Ø¬Ø¨Ù† Ø§Ù„Ø¥Ù…Ù†ØªØ§Ù„) est le fameux fromage suisse avec des trous.", icon: "ğŸ§€" },
                    { question: "Qu'est-ce qu'une 'vinaigrette' ?", options: ["une sauce pour salade", "un petit vin", "une sorte de viande"], correct: 0, explanation: "La vinaigrette est une sauce (ØµÙ„ØµØ©) Ã  base d'huile, de vinaigre, de sel et de poivre.", icon: "ğŸ¥—" }
                ],
                expert: [
                    { question: "Quelle est la diffÃ©rence entre 'brunoise' et 'julienne' ?", options: ["l'une est cuite, l'autre crue", "ce sont des techniques de dÃ©coupe", "l'une est salÃ©e, l'autre sucrÃ©e"], correct: 1, explanation: "Ce sont deux techniques de dÃ©coupe de lÃ©gumes : la brunoise en trÃ¨s petits dÃ©s (Ù…ÙƒØ¹Ø¨Ø§Øª ØµØºÙŠØ±Ø© Ø¬Ø¯Ø§), la julienne en fins bÃ¢tonnets (Ø´Ø±Ø§Ø¦Ø­ Ø±ÙÙŠØ¹Ø©).", icon: "ğŸ¥•" },
                    { question: "Qu'est-ce qu'un 'court-bouillon' ?", options: ["un bouillon qui cuit vite", "un liquide aromatisÃ© pour pocher", "une soupe trÃ¨s courte"], correct: 1, explanation: "Un court-bouillon est un liquide (Ù…Ø§Ø¡ Ø£Ùˆ Ù†Ø¨ÙŠØ°) aromatisÃ© utilisÃ© pour pocher (Ø³Ù„Ù‚) poissons ou crustacÃ©s.", icon: "ğŸŸ" },
                    { question: "D'oÃ¹ vient le plat 'la ratatouille' ?", options: ["de Bretagne", "de Provence", "d'Alsace"], correct: 1, explanation: "La ratatouille est une spÃ©cialitÃ© Ã  base de lÃ©gumes originaire de Provence (Ù…Ù†Ø·Ù‚Ø© Ø¨Ø±ÙˆÙØ§Ù†Ø³).", icon: "ğŸ†" }
                ]
            },
            deplacements: {
                debutant: [
                    { question: "Pour aller au travail, je prends le...", options: ["bus", "chat", "nuage"], correct: 0, explanation: "Le bus (Ø§Ù„Ø­Ø§ÙÙ„Ø©) est un moyen de transport en commun.", icon: "ğŸšŒ" },
                    { question: "Ã€ pied, on marche sur le...", options: ["plafond", "trottoir", "lit"], correct: 1, explanation: "Le trottoir (Ø§Ù„Ø±ØµÙŠÙ) est rÃ©servÃ© aux piÃ©tons.", icon: "ğŸš¶â€â™€ï¸" },
                    { question: "Pour traverser la rue, on regarde Ã ... et Ã  droite.", options: ["gauche", "l'intÃ©rieur", "en haut"], correct: 0, explanation: "Il faut toujours regarder Ã  gauche puis Ã  droite (ÙŠØ³Ø§Ø±Ù‹Ø§ Ø«Ù… ÙŠÙ…ÙŠÙ†Ù‹Ø§) avant de traverser.", icon: "ğŸš¦" },
                    { question: "Le train s'arrÃªte Ã  la...", options: ["gare", "piscine", "forÃªt"], correct: 0, explanation: "La gare (Ù…Ø­Ø·Ø© Ø§Ù„Ù‚Ø·Ø§Ø±) est l'endroit oÃ¹ les trains s'arrÃªtent.", icon: "ğŸš‰" }
                ],
                intermediaire: [
                    { question: "Pour prendre le mÃ©tro Ã  Paris, on a besoin d'un...", options: ["ticket de cinÃ©ma", "ticket de mÃ©tro", "ticket de loto"], correct: 1, explanation: "Un ticket de mÃ©tro (ØªØ°ÙƒØ±Ø© Ù…ØªØ±Ùˆ) est nÃ©cessaire pour voyager dans le mÃ©tro parisien.", icon: "ğŸš‡" },
                    { question: "Que faut-il faire Ã  un feu rouge ?", options: ["accÃ©lÃ©rer", "s'arrÃªter", "klaxonner"], correct: 1, explanation: "Un feu rouge (Ø¥Ø´Ø§Ø±Ø© Ø­Ù…Ø±Ø§Ø¡) signifie qu'il faut s'arrÃªter.", icon: "ğŸ”´" },
                    { question: "Comment demande-t-on son chemin ?", options: ["'OÃ¹ est la gare, s'il vous plaÃ®t ?'", "'Quel Ã¢ge avez-vous ?'", "'Combien Ã§a coÃ»te ?'"], correct: 0, explanation: "C'est la phrase correcte pour demander son chemin (Ù„Ù„Ø³Ø¤Ø§Ù„ Ø¹Ù† Ø§Ù„Ø·Ø±ÙŠÙ‚).", icon: "ğŸ—ºï¸" }
                ],
                expert: [
                    { question: "Que signifie 'composter son billet' ?", options: ["le jeter", "le valider dans une machine", "l'acheter"], correct: 1, explanation: "Il faut composter (ØªØ«Ù‚ÙŠØ¨) son billet avant de monter dans un train en France pour le valider.", icon: "âœ…" },
                    { question: "Qu'est-ce que le 'covoiturage' ?", options: ["louer une voiture", "partager sa voiture avec d'autres", "conduire trÃ¨s vite"], correct: 1, explanation: "Le covoiturage (Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª) consiste Ã  partager un trajet en voiture pour rÃ©duire les frais et la pollution.", icon: "ğŸš—" },
                    { question: "Sur une autoroute franÃ§aise, quelle est la limitation de vitesse standard par temps sec ?", options: ["110 km/h", "130 km/h", "90 km/h"], correct: 1, explanation: "La vitesse est limitÃ©e Ã  130 km/h (130 ÙƒÙŠÙ„ÙˆÙ…ØªØ± ÙÙŠ Ø§Ù„Ø³Ø§Ø¹Ø©) sur autoroute par temps sec.", icon: "ï¿½ï¸" }
                ]
            },
            sante: {
                debutant: [
                    { question: "Quand on est malade, on va chez le...", options: ["boulanger", "mÃ©decin", "chat"], correct: 1, explanation: "Le mÃ©decin (Ø§Ù„Ø·Ø¨ÙŠØ¨) soigne les gens malades.", icon: "ğŸ‘¨â€âš•ï¸" },
                    { question: "Pour les mÃ©dicaments, on va Ã  la...", options: ["boulangerie", "pharmacie", "plage"], correct: 1, explanation: "La pharmacie (Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©) vend des mÃ©dicaments.", icon: "ğŸ’Š" },
                    { question: "J'ai mal Ã  la... (head)", options: ["chaussure", "tÃªte", "voiture"], correct: 1, explanation: "Avoir mal Ã  la tÃªte (ØµØ¯Ø§Ø¹) est une douleur courante.", icon: "ğŸ¤•" },
                    { question: "Pour se brosser les dents, on utilise une brosse Ã  dents et du...", options: ["savon", "dentifrice", "shampoing"], correct: 1, explanation: "On utilise du dentifrice (Ù…Ø¹Ø¬ÙˆÙ† Ø£Ø³Ù†Ø§Ù†) pour se laver les dents.", icon: "ğŸ¦·" }
                ],
                intermediaire: [
                    { question: "Un mÃ©decin qui soigne les enfants est un...", options: ["pÃ©diatre", "dentiste", "cardiologue"], correct: 0, explanation: "Le pÃ©diatre (Ø·Ø¨ÙŠØ¨ Ø§Ù„Ø£Ø·ÙØ§Ù„) est le spÃ©cialiste de la santÃ© des enfants.", icon: "ğŸ‘¶" },
                    { question: "Que prend-on pour faire baisser la fiÃ¨vre ?", options: ["un antibiotique", "un antipyrÃ©tique", "un somnifÃ¨re"], correct: 1, explanation: "Un antipyrÃ©tique (Ø®Ø§ÙØ¶ Ù„Ù„Ø­Ø±Ø§Ø±Ø©), comme le paracÃ©tamol, aide Ã  rÃ©duire la fiÃ¨vre.", icon: "ğŸŒ¡ï¸" },
                    { question: "Comment appelle-t-on une ordonnance du mÃ©decin ?", options: ["une prescription", "une facture", "une lettre"], correct: 0, explanation: "Une prescription (ÙˆØµÙØ© Ø·Ø¨ÙŠØ©) est le document oÃ¹ le mÃ©decin Ã©crit les mÃ©dicaments Ã  prendre.", icon: "ğŸ“" }
                ],
                expert: [
                    { question: "Qu'est-ce que la 'Carte Vitale' en France ?", options: ["une carte de crÃ©dit", "la carte d'assurance maladie", "une carte de fidÃ©litÃ©"], correct: 1, explanation: "La Carte Vitale (Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ØªØ£Ù…ÙŠÙ† Ø§Ù„ØµØ­ÙŠ) est la carte d'assurance maladie en France, qui permet le remboursement des soins.", icon: "ğŸŸ©" },
                    { question: "Que signifie l'expression 'avoir un chat dans la gorge' ?", options: ["Ãªtre trÃ¨s malade", "Ãªtre enrouÃ©, avoir du mal Ã  parler", "avoir mangÃ© un chat"], correct: 1, explanation: "C'est une expression idiomatique qui signifie Ãªtre enrouÃ© (Ø¨Ø­Ø© ÙÙŠ Ø§Ù„ØµÙˆØª).", icon: "ğŸ—£ï¸" },
                    { question: "Quel est le numÃ©ro d'urgence mÃ©dicale en France (SAMU) ?", options: ["le 15", "le 17", "le 18"], correct: 0, explanation: "Le 15 est le numÃ©ro du SAMU (Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ø·Ø¨ÙŠØ© Ø§Ù„Ø·Ø§Ø±Ø¦Ø©) pour les urgences mÃ©dicales.", icon: "ğŸš‘" }
                ]
            },
            maison: {
                debutant: [
                    { question: "On dort dans la...", options: ["cuisine", "chambre", "rue"], correct: 1, explanation: "La chambre (ØºØ±ÙØ© Ø§Ù„Ù†ÙˆÙ…) est la piÃ¨ce oÃ¹ l'on dort.", icon: "ğŸ›ï¸" },
                    { question: "On cuisine dans la...", options: ["cuisine", "salle de bain", "garage"], correct: 0, explanation: "La cuisine (Ø§Ù„Ù…Ø·Ø¨Ø®) est la piÃ¨ce oÃ¹ l'on prÃ©pare les repas.", icon: "ğŸ³" },
                    { question: "Pour s'asseoir dans le salon, on utilise un...", options: ["lit", "canapÃ©", "bureau"], correct: 1, explanation: "Le canapÃ© (Ø§Ù„Ø£Ø±ÙŠÙƒØ©) est un meuble confortable pour s'asseoir.", icon: "ğŸ›‹ï¸" },
                    { question: "On se lave dans la...", options: ["chambre", "salle de bain", "cuisine"], correct: 1, explanation: "La salle de bain (Ø§Ù„Ø­Ù…Ø§Ù…) est la piÃ¨ce pour l'hygiÃ¨ne personnelle.", icon: "ğŸ›" }
                ],
                intermediaire: [
                    { question: "Comment appelle-t-on la tÃ¢che de nettoyer le sol avec de l'eau ?", options: ["passer l'aspirateur", "faire la vaisselle", "passer la serpilliÃ¨re"], correct: 2, explanation: "'Passer la serpilliÃ¨re' (Ù…Ø³Ø­ Ø§Ù„Ø£Ø±Ø¶ÙŠØ©) signifie nettoyer le sol avec une serpillÃ¨re humide.", icon: "ğŸ§¹" },
                    { question: "Quel appareil garde les aliments au frais ?", options: ["le four", "le rÃ©frigÃ©rateur", "le micro-ondes"], correct: 1, explanation: "Le rÃ©frigÃ©rateur (Ø§Ù„Ø«Ù„Ø§Ø¬Ø©), ou frigo, conserve les aliments au froid.", icon: "ğŸ§Š" },
                    { question: "Le contraire de 'locataire' est...", options: ["propriÃ©taire", "voisin", "gardien"], correct: 0, explanation: "Le propriÃ©taire (Ø§Ù„Ù…Ø§Ù„Ùƒ) possÃ¨de le logement, tandis que le locataire (Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±) le loue.", icon: "ğŸ”‘" }
                ],
                expert: [
                    { question: "En France, qu'est-ce que la 'taxe d'habitation' ?", options: ["un impÃ´t sur le revenu", "un impÃ´t local pour les occupants d'un logement", "une taxe sur les achats"], correct: 1, explanation: "La taxe d'habitation (Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø³ÙƒÙ†) est un impÃ´t payÃ© par la personne qui habite un logement, qu'elle soit locataire ou propriÃ©taire (en cours de suppression).", icon: "ğŸ›ï¸" },
                    { question: "Que signifie 'bricoler' ?", options: ["faire des petits travaux manuels", "casser des objets", "dormir"], correct: 0, explanation: "'Bricoler' (Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ø£Ø¹Ù…Ø§Ù„ ÙŠØ¯ÙˆÙŠØ©) signifie faire de petites rÃ©parations ou crÃ©ations soi-mÃªme.", icon: "ğŸ› ï¸" },
                    { question: "Qu'est-ce qu'un 'bail' ?", options: ["un balai pour nettoyer", "le contrat de location", "une fÃªte"], correct: 1, explanation: "Le bail (Ø¹Ù‚Ø¯ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±) est le contrat officiel entre un locataire et un propriÃ©taire.", icon: "ğŸ“„" }
                ]
            },
            temps: {
                debutant: [
                    { question: "Aujourd'hui, il fait... (sun)", options: ["beau", "carrÃ©", "rouge"], correct: 0, explanation: "'Il fait beau' (Ø§Ù„Ø¬Ùˆ Ø¬Ù…ÙŠÙ„) signifie que le temps est ensoleillÃ©.", icon: "â˜€ï¸" },
                    { question: "En hiver, il fait...", options: ["chaud", "froid", "carrÃ©"], correct: 1, explanation: "L'hiver (Ø§Ù„Ø´ØªØ§Ø¡) est la saison froide.", icon: "â„ï¸" },
                    { question: "AprÃ¨s lundi, c'est...", options: ["dimanche", "mardi", "janvier"], correct: 1, explanation: "Mardi (Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡) est le jour qui suit lundi (Ø§Ù„Ø§Ø«Ù†ÙŠÙ†).", icon: "ğŸ“…" },
                    { question: "Quand le ciel est gris et que l'eau tombe, on dit qu'il...", options: ["neige", "pleut", "vente"], correct: 1, explanation: "Quand il pleut (ØªÙ…Ø·Ø±), de l'eau tombe du ciel.", icon: "ğŸŒ§ï¸" }
                ],
                intermediaire: [
                    { question: "Que signifie 'il y a des averses' ?", options: ["il pleut toute la journÃ©e", "il y a de courtes pluies", "il y a du brouillard"], correct: 1, explanation: "Une averse (Ø²Ø®Ø© Ù…Ø·Ø±) est une pluie courte et souvent intense.", icon: "ğŸŒ¦ï¸" },
                    { question: "Quelle saison vient aprÃ¨s l'Ã©tÃ© ?", options: ["le printemps", "l'automne", "l'hiver"], correct: 1, explanation: "L'automne (Ø§Ù„Ø®Ø±ÙŠÙ) suit l'Ã©tÃ©.", icon: "ğŸ‚" },
                    { question: "S'il est 15h00, on peut aussi dire qu'il est trois heures de...", options: ["le matin", "l'aprÃ¨s-midi", "le soir"], correct: 1, explanation: "15h00 correspond Ã  3 heures de l'aprÃ¨s-midi (Ø¨Ø¹Ø¯ Ø§Ù„Ø¸Ù‡Ø±).", icon: "ğŸ•’" }
                ],
                expert: [
                    { question: "Que signifie l'expression 'il pleut des cordes' ?", options: ["il pleut un peu", "il pleut trÃ¨s fort", "il grÃªle"], correct: 1, explanation: "C'est une expression idiomatique pour dire qu'il y a une pluie torrentielle (Ù…Ø·Ø± ØºØ²ÙŠØ±).", icon: "â›ˆï¸" },
                    { question: "Qu'est-ce que le 'mistral' ?", options: ["un vent froid et sec en Provence", "une tempÃªte de neige", "une vague de chaleur"], correct: 0, explanation: "Le mistral (Ø±ÙŠØ§Ø­ Ø§Ù„Ù…ÙŠØ³ØªØ±Ø§Ù„) est un vent violent, froid et sec qui souffle dans la vallÃ©e du RhÃ´ne et en Provence.", icon: "ğŸ’¨" },
                    { question: "Quelle est la diffÃ©rence entre 'la mÃ©tÃ©o' et 'le climat' ?", options: ["aucune", "la mÃ©tÃ©o est Ã  court terme, le climat Ã  long terme", "la mÃ©tÃ©o est pour l'Ã©tÃ©, le climat pour l'hiver"], correct: 1, explanation: "La mÃ©tÃ©o (Ø§Ù„Ø·Ù‚Ø³) dÃ©crit le temps qu'il fait au jour le jour, tandis que le climat (Ø§Ù„Ù…Ù†Ø§Ø®) dÃ©crit les tendances mÃ©tÃ©orologiques sur de longues pÃ©riodes.", icon: "ğŸŒ" }
                ]
            },
            ecole: {
                debutant: [
                    { question: "Ã€ l'Ã©cole, on Ã©crit avec un...", options: ["stylo", "poisson", "nuage"], correct: 0, explanation: "Le stylo (Ø§Ù„Ù‚Ù„Ù…) est l'outil principal pour Ã©crire.", icon: "âœï¸" },
                    { question: "Pour apprendre, on lit des...", options: ["livres", "chaussures", "voitures"], correct: 0, explanation: "Les livres (Ø§Ù„ÙƒØªØ¨) contiennent des connaissances et des histoires.", icon: "ğŸ“š" },
                    { question: "La personne qui enseigne est le/la...", options: ["professeur", "docteur", "chanteur"], correct: 0, explanation: "Le professeur (Ø§Ù„Ù…Ø¹Ù„Ù…/Ø©) enseigne aux Ã©lÃ¨ves.", icon: "ğŸ§‘â€ğŸ«" },
                    { question: "Les vacances d'Ã©tÃ© durent gÃ©nÃ©ralement...", options: ["une semaine", "deux mois", "un jour"], correct: 1, explanation: "En France, les grandes vacances d'Ã©tÃ© (Ø§Ù„Ø¹Ø·Ù„Ø© Ø§Ù„ØµÙŠÙÙŠØ©) durent environ deux mois (juillet et aoÃ»t).", icon: "ğŸ–ï¸" }
                ],
                intermediaire: [
                    { question: "Comment s'appelle l'examen Ã  la fin du lycÃ©e en France ?", options: ["le brevet", "le baccalaurÃ©at", "la licence"], correct: 1, explanation: "Le baccalaurÃ©at (Ø§Ù„Ø¨ÙƒØ§Ù„ÙˆØ±ÙŠØ§), souvent appelÃ© 'le bac', est l'examen qui conclut les Ã©tudes secondaires.", icon: "ğŸ“" },
                    { question: "Quelle matiÃ¨re Ã©tudie les nombres et les calculs ?", options: ["l'histoire", "le franÃ§ais", "les mathÃ©matiques"], correct: 2, explanation: "Les mathÃ©matiques (Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª) sont la science des nombres.", icon: "â—" },
                    { question: "La pause du midi Ã  l'Ã©cole s'appelle la...", options: ["rÃ©crÃ©ation", "cantine", "sieste"], correct: 1, explanation: "La cantine (Ø§Ù„ÙƒØ§ÙØªÙŠØ±ÙŠØ§) est le lieu oÃ¹ les Ã©lÃ¨ves dÃ©jeunent.", icon: " lunchtime" }
                ],
                expert: [
                    { question: "En France, Ã  quel Ã¢ge l'Ã©cole est-elle obligatoire ?", options: ["dÃ¨s la naissance", "Ã  partir de 3 ans", "Ã  partir de 6 ans"], correct: 1, explanation: "Depuis 2019, l'instruction est obligatoire (Ø¥Ù„Ø²Ø§Ù…ÙŠØ©) en France dÃ¨s l'Ã¢ge de 3 ans.", icon: "ğŸ›ï¸" },
                    { question: "Que signifie 'redoubler' une classe ?", options: ["la sauter", "la refaire une deuxiÃ¨me fois", "la finir avec succÃ¨s"], correct: 1, explanation: "Redoubler (Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø³Ù†Ø©) signifie qu'un Ã©lÃ¨ve doit refaire la mÃªme annÃ©e scolaire.", icon: "ğŸ”" },
                    { question: "Comment appelle-t-on les universitÃ©s les plus prestigieuses en France, accessibles sur concours ?", options: ["les Grandes Ã‰coles", "les Petites Ã‰coles", "les UniversitÃ©s Normales"], correct: 0, explanation: "Les Grandes Ã‰coles (Ø§Ù„Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„ÙƒØ¨Ø±Ù‰) sont des Ã©tablissements d'enseignement supÃ©rieur trÃ¨s sÃ©lectifs.", icon: "ğŸ«" }
                ]
            },
            famille: {
                debutant: [
                    { question: "Le pÃ¨re de mon pÃ¨re est mon...", options: ["frÃ¨re", "grand-pÃ¨re", "chat"], correct: 1, explanation: "Le pÃ¨re de votre pÃ¨re est votre grand-pÃ¨re (Ø§Ù„Ø¬Ø¯).", icon: "ğŸ‘´" },
                    { question: "La fille de ma tante est ma...", options: ["cousine", "voiture", "chaussure"], correct: 0, explanation: "La fille de votre tante ou de votre oncle est votre cousine (Ø§Ø¨Ù†Ø© Ø§Ù„Ø¹Ù…/Ø§Ù„Ø®Ø§Ù„).", icon: "ğŸ‘§" },
                    { question: "Le frÃ¨re de ma mÃ¨re est mon...", options: ["pÃ¨re", "oncle", "cousin"], correct: 1, explanation: "Le frÃ¨re de votre mÃ¨re ou de votre pÃ¨re est votre oncle (Ø§Ù„Ø¹Ù…/Ø§Ù„Ø®Ø§Ù„).", icon: "ğŸ‘¨" },
                    { question: "La femme de mon pÃ¨re est ma...", options: ["sÅ“ur", "mÃ¨re", "tante"], correct: 1, explanation: "La femme de votre pÃ¨re est votre mÃ¨re (Ø§Ù„Ø£Ù…).", icon: "ğŸ‘©" }
                ],
                intermediaire: [
                    { question: "Comment appelle-t-on les parents de mes parents ?", options: ["mes grands-parents", "mes arriÃ¨res-grands-parents", "mes oncles"], correct: 0, explanation: "Les parents de vos parents sont vos grands-parents (Ø§Ù„Ø£Ø¬Ø¯Ø§Ø¯).", icon: "ğŸ‘µğŸ‘´" },
                    { question: "Le mari de ma sÅ“ur est mon...", options: ["beau-frÃ¨re", "beau-pÃ¨re", "cousin"], correct: 0, explanation: "Le mari de votre sÅ“ur est votre beau-frÃ¨re (ØµÙ‡Ø±).", icon: "ğŸ¤µ" },
                    { question: "Un enfant qui n'a ni frÃ¨re ni sÅ“ur est un...", options: ["enfant unique", "enfant terrible", "enfant sage"], correct: 0, explanation: "Un enfant unique (Ø·ÙÙ„ ÙˆØ­ÙŠØ¯) est un enfant qui n'a pas de fratrie.", icon: "ğŸ‘¤" }
                ],
                expert: [
                    { question: "En France, qu'est-ce que le 'PACS' ?", options: ["un type de mariage", "un pacte civil de solidaritÃ©", "une fÃªte de famille"], correct: 1, explanation: "Le PACS (Ù…ÙŠØ«Ø§Ù‚ Ø§Ù„ØªØ¶Ø§Ù…Ù† Ø§Ù„Ù…Ø¯Ù†ÙŠ) est une forme d'union civile entre deux personnes, diffÃ©rente du mariage.", icon: "ğŸ“œ" },
                    { question: "Comment appelle-t-on le fait d'avoir plusieurs gÃ©nÃ©rations vivant sous le mÃªme toit ?", options: ["la colocation", "la cohabitation intergÃ©nÃ©rationnelle", "le concubinage"], correct: 1, explanation: "La cohabitation intergÃ©nÃ©rationnelle (Ø§Ù„Ø³ÙƒÙ† Ø§Ù„Ù…Ø´ØªØ±Ùƒ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¬ÙŠØ§Ù„) est de plus en plus courante.", icon: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦" },
                    { question: "Que signifie l'adjectif 'cadet' ou 'cadette' dans une fratrie ?", options: ["l'aÃ®nÃ©(e)", "le/la plus jeune", "celui/celle du milieu"], correct: 1, explanation: "Le cadet ou la cadette (Ø§Ù„Ø£ØµØºØ± Ø³Ù†Ø§Ù‹) est l'enfant le plus jeune de la famille, par opposition Ã  l'aÃ®nÃ©(e) (Ø§Ù„Ø£ÙƒØ¨Ø±).", icon: "ğŸ‘¶" }
                ]
            },
            travail: {
                debutant: [
                    { question: "Le mÃ©decin travaille Ã  l'...", options: ["hÃ´pital", "ocÃ©an", "arbre"], correct: 0, explanation: "Un mÃ©decin travaille souvent dans un hÃ´pital (Ù…Ø³ØªØ´ÙÙ‰) ou un cabinet mÃ©dical.", icon: "ğŸ¥" },
                    { question: "Le boulanger fait du...", options: ["pain", "vent", "bruit"], correct: 0, explanation: "Le mÃ©tier du boulanger (Ø§Ù„Ø®Ø¨Ø§Ø²) est de faire du pain.", icon: "ğŸ¥–" },
                    { question: "La personne qui dirige une entreprise est le...", options: ["directeur / la directrice", "plombier", "danseur"], correct: 0, explanation: "Le directeur ou la directrice (Ø§Ù„Ù…Ø¯ÙŠØ±/Ø©) est Ã  la tÃªte de l'entreprise.", icon: "ğŸ§‘â€ğŸ’¼" },
                    { question: "Pour postuler Ã  un emploi, on envoie un CV et une lettre de...", options: ["motivation", "dÃ©mission", "vacances"], correct: 0, explanation: "Une lettre de motivation (Ø±Ø³Ø§Ù„Ø© Ø¯Ø§ÙØ¹) accompagne le CV pour expliquer pourquoi on veut le poste.", icon: "âœ‰ï¸" }
                ],
                intermediaire: [
                    { question: "Comment s'appelle la rÃ©union de travail ?", options: ["la pause", "la rÃ©union", "le dÃ©jeuner"], correct: 1, explanation: "Une rÃ©union (Ø§Ø¬ØªÙ…Ø§Ø¹) est un rassemblement de collÃ¨gues pour discuter.", icon: "ğŸ¤" },
                    { question: "Quel est le salaire minimum en France ?", options: ["le SMIC", "le RSA", "le PIB"], correct: 0, explanation: "Le SMIC (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø£Ø¬ÙˆØ±) est le salaire horaire minimum lÃ©gal.", icon: "ğŸ’°" },
                    { question: "Que signifie Ãªtre 'au chÃ´mage' ?", options: ["Ãªtre en vacances", "Ãªtre sans emploi", "travailler beaucoup"], correct: 1, explanation: "ÃŠtre au chÃ´mage (Ø¹Ø§Ø·Ù„ Ø¹Ù† Ø§Ù„Ø¹Ù…Ù„) signifie ne pas avoir de travail mais en chercher un.", icon: "ğŸ“‰" }
                ],
                expert: [
                    { question: "Quelle est la diffÃ©rence entre un 'CDD' et un 'CDI' ?", options: ["le salaire", "la durÃ©e du contrat", "le lieu de travail"], correct: 1, explanation: "Un CDI est un Contrat Ã  DurÃ©e IndÃ©terminÃ©e (Ø¹Ù‚Ø¯ ØºÙŠØ± Ù…Ø­Ø¯Ø¯ Ø§Ù„Ù…Ø¯Ø©), tandis qu'un CDD est un Contrat Ã  DurÃ©e DÃ©terminÃ©e (Ø¹Ù‚Ø¯ Ù…Ø­Ø¯Ø¯ Ø§Ù„Ù…Ø¯Ø©).", icon: "ğŸ“„" },
                    { question: "Que sont les 'RTT' (RÃ©duction du Temps de Travail) ?", options: ["des jours de congÃ© supplÃ©mentaires", "des heures supplÃ©mentaires payÃ©es", "une baisse de salaire"], correct: 0, explanation: "Les RTT sont des jours de repos (Ø£ÙŠØ§Ù… Ø±Ø§Ø­Ø©) accordÃ©s aux salariÃ©s qui travaillent plus de 35 heures par semaine.", icon: "ğŸ—“ï¸" },
                    { question: "Comment appelle-t-on la pÃ©riode au dÃ©but d'un contrat pour tester l'employÃ© ?", options: ["la pÃ©riode d'essai", "la pÃ©riode de grÃ¢ce", "la pÃ©riode de vacances"], correct: 0, explanation: "La pÃ©riode d'essai (ÙØªØ±Ø© Ø§Ù„ØªØ¬Ø±Ø¨Ø©) permet Ã  l'employeur et au salariÃ© de voir si la collaboration fonctionne.", icon: "â³" }
                ]
            },
            voyage: {
                debutant: [
                    { question: "Pour voyager en avion, il faut un...", options: ["billet", "sandwich", "chat"], correct: 0, explanation: "Il faut un billet d'avion (ØªØ°ÙƒØ±Ø© Ø·ÙŠØ±Ø§Ù†) pour monter dans un avion.", icon: "ğŸ«" },
                    { question: "Ã€ l'hÃ´tel, on dort dans une...", options: ["voiture", "chambre", "piscine"], correct: 1, explanation: "On rÃ©serve une chambre (ØºØ±ÙØ©) Ã  l'hÃ´tel pour y dormir.", icon: "ğŸ¨" },
                    { question: "Les vÃªtements de voyage, on les met dans une...", options: ["valise", "casserole", "fleur"], correct: 0, explanation: "La valise (Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„Ø³ÙØ±) sert Ã  transporter ses affaires.", icon: "ğŸ§³" },
                    { question: "Pour voyager dans un autre pays, on a souvent besoin d'un...", options: ["passeport", "tÃ©lÃ©phone", "chapeau"], correct: 0, explanation: "Le passeport (Ø¬ÙˆØ§Ø² Ø§Ù„Ø³ÙØ±) est un document d'identitÃ© international.", icon: "ğŸ›‚" }
                ],
                intermediaire: [
                    { question: "Comment s'appelle l'endroit oÃ¹ les avions dÃ©collent et atterrissent ?", options: ["la gare", "le port", "l'aÃ©roport"], correct: 2, explanation: "L'aÃ©roport (Ø§Ù„Ù…Ø·Ø§Ø±) est le lieu de dÃ©part et d'arrivÃ©e des avions.", icon: "âœˆï¸" },
                    { question: "Que signifie 'vol direct' ?", options: ["un vol avec escale", "un vol sans escale", "un vol annulÃ©"], correct: 1, explanation: "Un vol direct (Ø±Ø­Ù„Ø© Ù…Ø¨Ø§Ø´Ø±Ø©) va d'un point A Ã  un point B sans s'arrÃªter.", icon: "â¡ï¸" },
                    { question: "Qu'est-ce qu'une 'auberge de jeunesse' ?", options: ["un hÃ´tel de luxe", "un hÃ©bergement bon marchÃ© pour jeunes", "un restaurant"], correct: 1, explanation: "Une auberge de jeunesse (Ù†Ø²Ù„ Ø§Ù„Ø´Ø¨Ø§Ø¨) offre un logement simple et peu cher, souvent en dortoir.", icon: " bunk bed" }
                ],
                expert: [
                    { question: "Qu'est-ce que le 'dÃ©calage horaire' ?", options: ["une diffÃ©rence d'heure entre deux lieux", "un retard de l'avion", "une heure d'Ã©tÃ©"], correct: 0, explanation: "Le dÃ©calage horaire (ÙØ§Ø±Ù‚ Ø§Ù„ØªÙˆÙ‚ÙŠØª) est la fatigue due au changement rapide de fuseaux horaires.", icon: " jet lag" },
                    { question: "Que signifie 'hors-saison' ?", options: ["pendant la pÃ©riode la plus touristique", "en dehors de la pÃ©riode la plus touristique", "sans saison"], correct: 1, explanation: "Voyager hors-saison (Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…ÙˆØ³Ù… Ø§Ù„Ø³ÙŠØ§Ø­ÙŠ) est souvent moins cher et moins frÃ©quentÃ©.", icon: "ğŸ“‰" },
                    { question: "Dans l'UE, quel document peut remplacer le passeport pour les citoyens europÃ©ens ?", options: ["le permis de conduire", "la carte d'identitÃ© nationale", "la carte de crÃ©dit"], correct: 1, explanation: "Une carte d'identitÃ© nationale (Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ©) en cours de validitÃ© suffit pour voyager au sein de l'Espace Schengen.", icon: "ğŸ†”" }
                ]
            },
            technologie: {
                debutant: [
                    { question: "Pour tÃ©lÃ©phoner, on utilise un...", options: ["tÃ©lÃ©phone", "pain", "nuage"], correct: 0, explanation: "Le tÃ©lÃ©phone (Ø§Ù„Ù‡Ø§ØªÙ) est l'appareil de base pour communiquer Ã  distance.", icon: "ğŸ“±" },
                    { question: "Sur Internet, on peut envoyer des...", options: ["e-mails", "chaussures", "nuages"], correct: 0, explanation: "Les e-mails (Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ) sont des messages Ã©lectroniques.", icon: "ğŸ“§" },
                    { question: "Pour regarder des vidÃ©os, on utilise un...", options: ["ordinateur", "pain", "chat"], correct: 0, explanation: "Un ordinateur (Ø­Ø§Ø³ÙˆØ¨) ou un smartphone permet de visionner des vidÃ©os.", icon: "ğŸ’»" },
                    { question: "Pour se connecter Ã  Internet sans fil, on utilise le...", options: ["Bluetooth", "Wi-Fi", "GPS"], correct: 1, explanation: "Le Wi-Fi (Ø§Ù„ÙˆØ§ÙŠ ÙØ§ÙŠ) permet une connexion sans fil Ã  Internet.", icon: "ğŸ“¶" }
                ],
                intermediaire: [
                    { question: "Comment appelle-t-on le fait de copier un fichier d'Internet sur son ordinateur ?", options: ["tÃ©lÃ©charger", "supprimer", "imprimer"], correct: 0, explanation: "TÃ©lÃ©charger (ØªÙ†Ø²ÙŠÙ„) signifie transfÃ©rer des donnÃ©es d'un serveur vers son appareil.", icon: "ğŸ“¥" },
                    { question: "Quel est le nom d'un petit programme sur un smartphone ?", options: ["une application", "un dossier", "un virus"], correct: 0, explanation: "Une application (ØªØ·Ø¨ÙŠÙ‚), ou 'app', est un logiciel pour smartphone ou tablette.", icon: "ğŸ“²" },
                    { question: "Le 'cerveau' de l'ordinateur est le...", options: ["clavier", "processeur", "Ã©cran"], correct: 1, explanation: "Le processeur (Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬) exÃ©cute les instructions et les calculs de l'ordinateur.", icon: "âš™ï¸" }
                ],
                expert: [
                    { question: "Que signifie 'naviguer en mode incognito' ?", options: ["naviguer plus vite", "naviguer sans laisser d'historique sur l'appareil", "naviguer sans payer"], correct: 1, explanation: "Le mode incognito (ÙˆØ¶Ø¹ Ø§Ù„ØªØµÙØ­ Ø§Ù„Ù…ØªØ®ÙÙŠ) empÃªche le navigateur de sauvegarder votre historique, vos cookies et les informations saisies.", icon: "ğŸ•µï¸" },
                    { question: "Qu'est-ce que le 'cloud computing' ?", options: ["stocker des donnÃ©es sur son ordinateur", "stocker et accÃ©der Ã  des donnÃ©es sur des serveurs distants via Internet", "une nouvelle technologie de mÃ©tÃ©o"], correct: 1, explanation: "Le 'cloud' (Ø§Ù„Ø­ÙˆØ³Ø¨Ø© Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ©) permet d'utiliser des services et de stocker des fichiers en ligne plutÃ´t que localement.", icon: "â˜ï¸" },
                    { question: "En sÃ©curitÃ© informatique, qu'est-ce que le 'phishing' (hameÃ§onnage) ?", options: ["une technique de pÃªche", "une tentative de vol d'informations personnelles via un faux e-mail", "un antivirus"], correct: 1, explanation: "Le phishing (Ø§Ù„ØªØµÙŠØ¯ Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„ÙŠ) est une arnaque visant Ã  vous faire rÃ©vÃ©ler des informations confidentielles (mots de passe, numÃ©ros de carte).", icon: "ğŸ£" }
                ]
            },
            loisirs: {
                debutant: [
                    { question: "Pour faire du sport, on va au...", options: ["gymnase", "frigo", "nuage"], correct: 0, explanation: "Un gymnase (ØµØ§Ù„Ø© Ø±ÙŠØ§Ø¶ÙŠØ©) est un lieu Ã©quipÃ© pour le sport.", icon: "ğŸ¤¸" },
                    { question: "Au cinÃ©ma, on regarde des...", options: ["films", "chaussures", "nuages"], correct: 0, explanation: "Le cinÃ©ma (Ø§Ù„Ø³ÙŠÙ†Ù…Ø§) est l'endroit oÃ¹ l'on projette des films.", icon: "ğŸ¬" },
                    { question: "J'aime Ã©couter de la...", options: ["musique", "pluie", "voiture"], correct: 0, explanation: "Ã‰couter de la musique (Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰) est un loisir trÃ¨s populaire.", icon: "ğŸµ" },
                    { question: "Le week-end, beaucoup de gens aiment se... dans un parc.", options: ["battre", "promener", "cacher"], correct: 1, explanation: "Se promener (Ø§Ù„ØªÙ†Ø²Ù‡) est une activitÃ© relaxante.", icon: "ğŸŒ³" }
                ],
                intermediaire: [
                    { question: "Comment s'appelle une collection de timbres ?", options: ["la philatÃ©lie", "la numismatique", "la bibliophilie"], correct: 0, explanation: "La philatÃ©lie (Ù‡ÙˆØ§ÙŠØ© Ø¬Ù…Ø¹ Ø§Ù„Ø·ÙˆØ§Ø¨Ø¹) est l'art de collectionner les timbres-poste.", icon: "ğŸ’Œ" },
                    { question: "Quel est le musÃ©e le plus cÃ©lÃ¨bre de Paris ?", options: ["le musÃ©e d'Orsay", "le Centre Pompidou", "le Louvre"], correct: 2, explanation: "Le Louvre (Ù…ØªØ­Ù Ø§Ù„Ù„ÙˆÙØ±) est le plus grand musÃ©e d'art du monde et abrite la Joconde.", icon: "ğŸ–¼ï¸" },
                    { question: "Que signifie 'faire la grasse matinÃ©e' ?", options: ["se lever trÃ¨s tÃ´t", "dormir tard le matin", "faire du sport le matin"], correct: 1, explanation: "Faire la grasse matinÃ©e (Ø§Ù„Ù†ÙˆÙ… Ù„ÙˆÙ‚Øª Ù…ØªØ£Ø®Ø±) est un plaisir du week-end pour beaucoup.", icon: "ğŸ˜´" }
                ],
                expert: [
                    { question: "Qu'est-ce que la 'pÃ©tanque' ?", options: ["un jeu de cartes", "un sport de boules originaire du sud de la France", "une danse traditionnelle"], correct: 1, explanation: "La pÃ©tanque (Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø­Ø¯ÙŠØ¯ÙŠØ©) est un jeu d'adresse trÃ¨s populaire, surtout en Provence.", icon: "ğŸ¯" },
                    { question: "Quel Ã©vÃ©nement rÃ©compense les meilleurs films franÃ§ais chaque annÃ©e ?", options: ["les Oscars", "les CÃ©sars", "le Festival de Cannes"], correct: 1, explanation: "La cÃ©rÃ©monie des CÃ©sars (Ø¬ÙˆØ§Ø¦Ø² Ø³ÙŠØ²Ø§Ø±) est l'Ã©quivalent franÃ§ais des Oscars.", icon: "ğŸ†" },
                    { question: "Comment appelle-t-on un marchÃ© aux puces en plein air ?", options: ["une brocante", "une braderie", "les deux"], correct: 2, explanation: "Une brocante ou une braderie (Ø³ÙˆÙ‚ Ø§Ù„Ø³Ù„Ø¹ Ø§Ù„Ù…Ø³ØªØ¹Ù…Ù„Ø©) sont des marchÃ©s oÃ¹ l'on vend des objets d'occasion.", icon: "ğŸº" }
                ]
            }
        };


        // Initialize game
        loadStats();

        function selectCategory(category, element) {
            gameState.currentCategory = category;
            
            // Remove selection from all category cards
            document.querySelectorAll('.category-card').forEach(card => {
                card.classList.remove('ring-4', 'ring-blue-500', 'transform', 'scale-105');
            });
            
            // Add selection to clicked card
            element.classList.add('ring-4', 'ring-blue-500', 'transform', 'scale-105');
            
            // Update start button
            updateStartButton();
        }

        function selectLevel(level, element) {
            gameState.currentLevel = level;
            
            // Remove selection from all level buttons
            document.querySelectorAll('.level-btn').forEach(btn => {
                btn.classList.remove('ring-4', 'ring-white');
            });
            
            // Add selection to clicked button
            element.classList.add('ring-4', 'ring-white');
            
            // Update start button
            updateStartButton();
        }

        function updateStartButton() {
            const startBtn = document.getElementById('startGameBtn');
            const helpText = startBtn.nextElementSibling;
            
            if (gameState.currentCategory && gameState.currentLevel) {
                startBtn.disabled = false;
                startBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                startBtn.classList.add('hover:scale-105');
                startBtn.onclick = startGame;
                helpText.textContent = 'Ø§Ø¶ØºØ· Ù„Ù„Ø¨Ø¯Ø¡!';
                helpText.classList.add('text-green-600');
                helpText.classList.remove('text-gray-500');
            } else {
                startBtn.disabled = true;
                startBtn.classList.add('opacity-50', 'cursor-not-allowed');
                startBtn.classList.remove('hover:scale-105');
                startBtn.onclick = null;
                
                if (!gameState.currentCategory && !gameState.currentLevel) {
                    helpText.textContent = 'Ø§Ø®ØªØ± ÙØ¦Ø© ÙˆÙ…Ø³ØªÙˆÙ‰ Ù„Ù„Ø¨Ø¯Ø¡';
                } else if (!gameState.currentCategory) {
                    helpText.textContent = 'Ø§Ø®ØªØ± ÙØ¦Ø©';
                } else {
                    helpText.textContent = 'Ø§Ø®ØªØ± Ù…Ø³ØªÙˆÙ‰';
                }
                helpText.classList.remove('text-green-600');
                helpText.classList.add('text-gray-500');
            }
        }

        function startGame() {
            // Get questions for selected category and level
            const categoryQuestions = questionDatabase[gameState.currentCategory]?.[gameState.currentLevel] || [];
            
            if (categoryQuestions.length === 0) {
                alert('Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø© Ù…ØªØ§Ø­Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø­Ø§Ù„ÙŠØ§Ù‹!');
                return;
            }

            // Shuffle and select questions
            gameState.questions = shuffleArray([...categoryQuestions]).slice(0, Math.min(gameState.totalQuestions, categoryQuestions.length));
            gameState.currentQuestion = 0;
            gameState.score = 0;
            gameState.correctAnswers = 0;
            gameState.hintsUsed = 0;

            // Update display
            const categoryName = document.querySelector(`.category-card[data-category="${gameState.currentCategory}"] h3`).textContent;
            const levelName = document.querySelector(`.level-btn[data-level="${gameState.currentLevel}"]`).textContent.trim();
            document.getElementById('categoryDisplay').textContent = categoryName;
            document.getElementById('levelDisplay').textContent = levelName;

            // Show game screen
            showScreen('gameScreen');
            loadQuestion();
        }

        function loadQuestion() {
            if (gameState.currentQuestion >= gameState.questions.length) {
                showFinalScreen();
                return;
            }

            const question = gameState.questions[gameState.currentQuestion];
            
            // Update question display
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('questionIcon').textContent = question.icon;
            document.getElementById('questionNumber').textContent = gameState.currentQuestion + 1;
            document.getElementById('currentScore').textContent = gameState.score + ' Ù†Ù‚Ø·Ø©';
            
            // Update progress bar
            const progress = ((gameState.currentQuestion + 1) / gameState.questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';

            // Load options
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-btn w-full p-4 bg-white border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all font-medium';
                button.dir = 'ltr';
                button.style.textAlign = 'left';
                button.innerHTML = `<span class="text-lg font-semibold text-blue-600 mr-3">${String.fromCharCode(65 + index)}</span> ${option}`;
                button.onclick = () => selectAnswer(index);
                optionsContainer.appendChild(button);
            });

            // Reset timer
            gameState.timeLeft = gameState.currentLevel === 'debutant' ? 30 : gameState.currentLevel === 'intermediaire' ? 20 : 15;
            startTimer();

            // Reset hint button
            document.getElementById('hintBtn').style.display = 'block';
            document.getElementById('hintBtn').disabled = false;
        }

        function startTimer() {
            clearInterval(gameState.timer);
            const timerElement = document.getElementById('timer');
            const timerContainer = timerElement.parentElement;
            timerContainer.classList.remove('pulse', 'bg-red-200');
            timerContainer.classList.add('bg-red-100');
            updateTimerDisplay();
            
            gameState.timer = setInterval(() => {
                gameState.timeLeft--;
                updateTimerDisplay();
                
                if (gameState.timeLeft <= 0) {
                    clearInterval(gameState.timer);
                    selectAnswer(-1); // Time's up
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const timerElement = document.getElementById('timer');
            timerElement.textContent = gameState.timeLeft;
            
            if (gameState.timeLeft <= 5) {
                timerElement.parentElement.classList.add('pulse');
                timerElement.parentElement.classList.remove('bg-red-100');
                timerElement.parentElement.classList.add('bg-red-200');
            }
        }

        function selectAnswer(selectedIndex) {
            clearInterval(gameState.timer);
            
            const question = gameState.questions[gameState.currentQuestion];
            const isCorrect = selectedIndex === question.correct;
            const isTimeout = selectedIndex === -1;

            // Update buttons
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach((btn, index) => {
                btn.disabled = true;
                if (index === question.correct) {
                    btn.classList.add('correct');
                } else if (index === selectedIndex && !isCorrect) {
                    btn.classList.add('incorrect');
                }
            });

            // Calculate score
            let points = 0;
            if (isCorrect) {
                points = 10;
                if (gameState.timeLeft > 10) points += 5; // Bonus for speed
                gameState.correctAnswers++;
            }
            gameState.score += points;

            // Show result
            setTimeout(() => {
                showResult(isCorrect, isTimeout, question.explanation, points);
            }, 1500);
        }

        function showResult(isCorrect, isTimeout, explanation, points) {
            const resultIcon = document.getElementById('resultIcon');
            const resultTitle = document.getElementById('resultTitle');
            const resultMessage = document.getElementById('resultMessage');
            const explanationText = document.getElementById('explanationText');

            if (isTimeout) {
                resultIcon.textContent = 'â°';
                resultTitle.textContent = 'Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª!';
                resultMessage.innerHTML = '<span dir="ltr" class="inline-block">Temps Ã©coulÃ© !</span>';
            } else if (isCorrect) {
                resultIcon.textContent = 'ğŸ‰';
                resultTitle.textContent = 'Ø£Ø­Ø³Ù†Øª!';
                resultMessage.innerHTML = `<span dir="ltr" class="inline-block">Bravo !</span> Ù„Ù‚Ø¯ Ø±Ø¨Ø­Øª ${points} Ù†Ù‚Ø·Ø©!`;
                playSound('correct');
            } else {
                resultIcon.textContent = 'ğŸ˜…';
                resultTitle.textContent = 'Ù„ÙŠØ³ ØªÙ…Ø§Ù…Ø§Ù‹...';
                resultMessage.innerHTML = `<span dir="ltr" class="inline-block">Pas tout Ã  fait...</span> Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!`;
                playSound('incorrect');
            }

            explanationText.textContent = explanation;
            
            // Update next button
            const nextBtn = document.getElementById('nextBtn');
            if (gameState.currentQuestion >= gameState.questions.length - 1) {
                nextBtn.textContent = 'Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬';
                nextBtn.onclick = showFinalScreen;
            } else {
                nextBtn.textContent = 'â† Ø§Ù„ØªØ§Ù„ÙŠ';
                nextBtn.onclick = nextQuestion;
            }

            showScreen('resultScreen');
        }

        function nextQuestion() {
            gameState.currentQuestion++;
            showScreen('gameScreen');
            loadQuestion();
        }

        function showFinalScreen() {
            const percentage = gameState.questions.length > 0 ? Math.round((gameState.correctAnswers / gameState.questions.length) * 100) : 0;
            
            document.getElementById('finalScore').textContent = gameState.score;
            document.getElementById('finalCorrect').textContent = gameState.correctAnswers + '/' + gameState.questions.length;
            document.getElementById('finalPercentage').textContent = percentage + '%';

            // Show badges
            const badgesContainer = document.getElementById('badgesContainer');
            badgesContainer.innerHTML = '';
            
            if (percentage >= 80) {
                badgesContainer.innerHTML = '<div class="inline-block bg-yellow-100 text-yellow-800 px-4 py-2 rounded-full font-semibold">ğŸ† Ø®Ø¨ÙŠØ±!</div>';
            } else if (percentage >= 60) {
                badgesContainer.innerHTML = '<div class="inline-block bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-semibold">â­ Ø£Ø¯Ø§Ø¡ Ø±Ø§Ø¦Ø¹!</div>';
            } else {
                badgesContainer.innerHTML = '<div class="inline-block bg-green-100 text-green-800 px-4 py-2 rounded-full font-semibold">ğŸ’ª Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©!</div>';
            }

            // Save stats
            saveStats(gameState.score, gameState.correctAnswers);

            showScreen('finalScreen');
        }

        function showHint() {
            if (gameState.score < 5) {
                alert("Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ù†Ù‚Ø§Ø· ÙƒØ§ÙÙŠØ© Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªÙ„Ù…ÙŠØ­!");
                return;
            }

            const question = gameState.questions[gameState.currentQuestion];
            const buttons = document.querySelectorAll('.option-btn');
            
            // Find one wrong answer to remove
            let wrongAnswersIndices = [];
            buttons.forEach((btn, index) => {
                if (index !== question.correct && !btn.disabled) {
                    wrongAnswersIndices.push(index);
                }
            });
            
            if (wrongAnswersIndices.length > 0) {
                const removeIndex = wrongAnswersIndices[Math.floor(Math.random() * wrongAnswersIndices.length)];
                buttons[removeIndex].style.opacity = '0.3';
                buttons[removeIndex].onclick = null; // Disable click
                
                gameState.score -= 5;
                document.getElementById('currentScore').textContent = gameState.score + ' Ù†Ù‚Ø·Ø©';
                document.getElementById('hintBtn').disabled = true; // Use hint only once
            }
        }

        function speakQuestion() {
            const question = gameState.questions[gameState.currentQuestion];
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(question.question);
                utterance.lang = 'fr-FR';
                utterance.rate = 0.9;
                speechSynthesis.speak(utterance);
            } else {
                alert("Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„Ù†Ø·Ù‚ Ø§Ù„ØµÙˆØªÙŠ.");
            }
        }

        function playSound(type) {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                if (type === 'correct') {
                    oscillator.type = 'sine';
                    oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
                    gainNode.gain.exponentialRampToValueAtTime(0.00001, audioContext.currentTime + 0.5);
                } else {
                    oscillator.type = 'square';
                    oscillator.frequency.setValueAtTime(220, audioContext.currentTime); // A3
                    gainNode.gain.exponentialRampToValueAtTime(0.00001, audioContext.currentTime + 0.5);
                }
                
                gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                console.error("Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª:", e);
            }
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function showScreen(screenId) {
            document.querySelectorAll('#gameContainer > div').forEach(screen => {
                screen.classList.add('hidden');
            });
            document.getElementById(screenId).classList.remove('hidden', 'fade-in');
            // Trigger reflow to restart animation
            void document.getElementById(screenId).offsetWidth;
            document.getElementById(screenId).classList.add('fade-in');
        }

        function backToMenu() {
            clearInterval(gameState.timer);
            showScreen('menuScreen');
            
            // Reset selections
            document.querySelectorAll('.category-card').forEach(card => {
                card.classList.remove('ring-4', 'ring-blue-500', 'transform', 'scale-105');
            });
            document.querySelectorAll('.level-btn').forEach(btn => {
                btn.classList.remove('ring-4', 'ring-white');
            });
            
            gameState.currentCategory = '';
            gameState.currentLevel = '';
            
            // Reset start button
            updateStartButton();
        }

        function playAgain() {
            showScreen('menuScreen');
        }
    </script>
</body>
</html>
ï¿½