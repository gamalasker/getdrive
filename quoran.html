<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Scheherazade+New:wght@400;700&family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --pri:#1a472a; --prl:#2d6a4f; --acc:#c9a84c; --acl:#e8c86d;
  --bg:#0d1b12; --bgc:#162418; --bgs:#111a14;
  --tp:#f0e6c8; --ts:#9ab89e; --tm:#5a7a5e;
  --bd:#2a3f2c; --ab:#0f1e13; --ah:#192b1d;
  --sh:rgba(0,0,0,.5);
}
.lm {
  --pri:#1a6b3c; --prl:#2a8a52; --acc:#b8860b; --acl:#daa520;
  --bg:#f8f5e8; --bgc:#fff9f0; --bgs:#f0ebe0;
  --tp:#1a2e1c; --ts:#4a6850; --tm:#7a9a7e;
  --bd:#d4c9a0; --ab:#fefcf5; --ah:#f5eed8;
  --sh:rgba(0,0,0,.15);
}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Cairo',sans-serif;background:var(--bg);color:var(--tp);min-height:100vh;direction:rtl;transition:all .3s}
::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:var(--bg)}::-webkit-scrollbar-thumb{background:var(--pri);border-radius:3px}

/* â”€â”€â”€ HEADER â”€â”€â”€ */
.hdr{background:linear-gradient(135deg,var(--pri),var(--prl));padding:12px 24px;display:flex;align-items:center;justify-content:space-between;box-shadow:0 2px 20px var(--sh);position:sticky;top:0;z-index:100;border-bottom:2px solid var(--acc)}
.hbrand{display:flex;align-items:center;gap:12px}
.hlogo{font-size:28px;color:var(--acc)}
.htitle{font-family:'Scheherazade New',serif;font-size:24px;color:var(--acl);font-weight:700}
.hsub{font-size:12px;color:rgba(255,255,255,.7);margin-top:-4px}
.hacts{display:flex;gap:8px;align-items:center}
.bico{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:#fff;width:38px;height:38px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:16px;transition:all .2s}
.bico:hover{background:rgba(255,255,255,.25);transform:scale(1.05)}

/* â”€â”€â”€ LAYOUT â”€â”€â”€ */
.layout{display:flex;height:calc(100vh - 65px);overflow:hidden}

/* â”€â”€â”€ SIDEBAR â”€â”€â”€ */
.sdb{width:310px;background:var(--bgs);border-left:1px solid var(--bd);display:flex;flex-direction:column;overflow:hidden;flex-shrink:0;transition:width .3s}
.sdb.col{width:0}
.stabs{display:flex;border-bottom:1px solid var(--bd)}
.stab{flex:1;padding:11px 4px;text-align:center;cursor:pointer;font-size:12px;color:var(--tm);border-bottom:2px solid transparent;transition:all .2s;white-space:nowrap}
.stab.on{color:var(--acc);border-bottom-color:var(--acc);background:rgba(201,168,76,.05)}
.stab:hover:not(.on){color:var(--ts);background:rgba(255,255,255,.03)}
.spnl{display:none;flex:1;overflow:hidden;flex-direction:column}
.spnl.on{display:flex}

/* search */
.srca{padding:14px;border-bottom:1px solid var(--bd)}
.stypes{display:flex;gap:6px;margin-bottom:10px}
.stbtn{flex:1;padding:7px 2px;border:1px solid var(--bd);background:transparent;color:var(--ts);border-radius:8px;cursor:pointer;font-family:'Cairo',sans-serif;font-size:12px;transition:all .2s}
.stbtn.on{background:var(--pri);border-color:var(--prl);color:#fff}
.srci{width:100%;padding:9px 12px;background:var(--bgc);border:1px solid var(--bd);border-radius:10px;color:var(--tp);font-family:'Cairo',sans-serif;font-size:13px;outline:none;transition:border-color .2s;margin-bottom:8px}
.srci:focus{border-color:var(--acc)}
.srci::placeholder{color:var(--tm)}
.srcrow{display:flex;gap:8px}
.srcrow .srci{margin:0}
.sbtn{padding:9px 16px;background:var(--acc);border:none;border-radius:10px;color:var(--bg);cursor:pointer;font-family:'Cairo',sans-serif;font-size:13px;font-weight:700;transition:all .2s;white-space:nowrap}
.sbtn:hover{background:var(--acl)}
.shint{font-size:11px;color:var(--tm);margin-top:6px}
.qlinks{padding:12px 14px;border-bottom:1px solid var(--bd)}
.ql-lbl{font-size:12px;color:var(--ts);margin-bottom:8px}
.ql-btns{display:flex;flex-wrap:wrap;gap:6px}
.qlb{padding:5px 10px;border:1px solid var(--bd);background:transparent;color:var(--ts);border-radius:8px;cursor:pointer;font-family:'Cairo',sans-serif;font-size:12px;transition:all .2s}
.qlb:hover{color:var(--acc);border-color:var(--acc)}

/* surah list */
.ssl{padding:10px 12px;border-bottom:1px solid var(--bd)}
.ssl input{width:100%;padding:8px 12px;background:var(--bgc);border:1px solid var(--bd);border-radius:10px;color:var(--tp);font-family:'Cairo',sans-serif;font-size:13px;outline:none}
.ssl input:focus{border-color:var(--acc)}
.slist{flex:1;overflow-y:auto;padding:6px}
.si{display:flex;align-items:center;padding:9px 10px;border-radius:10px;cursor:pointer;transition:all .2s;margin-bottom:2px;border:1px solid transparent}
.si:hover{background:var(--ah);border-color:var(--bd)}
.si.on{background:var(--pri);border-color:var(--prl)}
.sinum{width:32px;height:32px;background:var(--bd);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;color:var(--acc);margin-left:8px;flex-shrink:0;font-weight:700}
.si.on .sinum{background:rgba(201,168,76,.2)}
.siinfo{flex:1}
.siname{font-family:'Scheherazade New',serif;font-size:16px;color:var(--tp);line-height:1.2}
.simeta{font-size:10px;color:var(--tm);margin-top:1px}
.sivs{font-size:11px;color:var(--tm)}

/* bookmarks */
.bmhdr{padding:12px 14px;border-bottom:1px solid var(--bd);display:flex;justify-content:space-between;align-items:center}
.bmtitle{font-size:13px;color:var(--ts)}
.bmclear{font-size:12px;color:#e74c3c;background:none;border:none;cursor:pointer;font-family:'Cairo',sans-serif}
.bmlist{flex:1;overflow-y:auto;padding:8px}
.bmi{display:flex;align-items:center;padding:9px 10px;border-radius:10px;background:var(--bgc);border:1px solid var(--bd);margin-bottom:5px;cursor:pointer;transition:all .2s}
.bmi:hover{border-color:var(--acc)}
.bmico{color:var(--acc);margin-left:8px;font-size:15px}
.bmtxt{flex:1}
.bmname{font-size:13px;color:var(--tp)}
.bmtype{font-size:10px;color:var(--tm);margin-top:1px}
.bmdel{color:var(--tm);background:none;border:none;cursor:pointer;font-size:13px;padding:4px;border-radius:4px;transition:color .2s}
.bmdel:hover{color:#e74c3c}
.nobm{text-align:center;color:var(--tm);padding:40px 16px;font-size:13px}
.nobm .i{font-size:32px;margin-bottom:8px;display:block}

/* â”€â”€â”€ MAIN â”€â”€â”€ */
.main{flex:1;overflow-y:auto;background:var(--bg)}
.chdr{background:var(--bgc);padding:16px 24px;border-bottom:1px solid var(--bd);display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:10}
.cinfo{display:flex;align-items:center;gap:14px;flex-wrap:wrap}
.cname{font-family:'Scheherazade New',serif;font-size:24px;color:var(--acc)}
.cbdgs{display:flex;gap:6px;flex-wrap:wrap}
.bdg{padding:3px 10px;border-radius:20px;font-size:11px;background:var(--pri);color:rgba(255,255,255,.8);border:1px solid var(--prl)}
.cacts{display:flex;gap:8px}
.bact{padding:7px 14px;border-radius:8px;border:1px solid var(--bd);background:transparent;color:var(--ts);cursor:pointer;font-family:'Cairo',sans-serif;font-size:12px;transition:all .2s;display:flex;align-items:center;gap:5px}
.bact:hover{background:var(--bgs);color:var(--acc);border-color:var(--acc)}
.bact.mk{color:var(--acc);border-color:var(--acc);background:rgba(201,168,76,.08)}

/* basmala */
.bsm{text-align:center;padding:26px 20px 16px;font-family:'Scheherazade New',serif;font-size:30px;color:var(--acc);text-shadow:0 0 20px rgba(201,168,76,.3)}

/* ayahs */
.ayc{padding:16px 24px 40px;max-width:860px;margin:0 auto}
.aycard{background:var(--ab);border:1px solid var(--bd);border-radius:14px;padding:20px 22px;margin-bottom:12px;transition:all .2s;position:relative}
.aycard:hover{background:var(--ah);border-color:rgba(201,168,76,.3)}
.aycard.hl{border-color:var(--acc);animation:hl 2.5s ease}
@keyframes hl{0%{background:rgba(201,168,76,.22)}100%{background:var(--ab)}}
.ayhdr{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.aynum{width:34px;height:34px;background:linear-gradient(135deg,var(--pri),var(--prl));border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;color:var(--acl);font-weight:700}
.aybtns{display:flex;gap:5px}
.aybtn{width:30px;height:30px;border-radius:7px;border:1px solid var(--bd);background:transparent;color:var(--tm);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:13px;transition:all .2s}
.aybtn:hover{color:var(--acc);border-color:var(--acc)}
.aybtn.mk{color:var(--acc);border-color:var(--acc);background:rgba(201,168,76,.1)}
.aytxt{font-family:'Scheherazade New',serif;font-size:26px;line-height:2.3;color:var(--tp);text-align:justify}
.ayend{display:inline-flex;align-items:center;justify-content:center;width:34px;height:34px;background:rgba(201,168,76,.1);border:1px solid rgba(201,168,76,.3);border-radius:50%;font-size:12px;color:var(--acc);margin-right:4px;vertical-align:middle}
.aybar{display:flex;align-items:center;gap:10px;margin-top:10px;padding-top:10px;border-top:1px solid var(--bd)}
.ayref{font-size:11px;color:var(--tm)}
.jzsep{text-align:center;padding:8px;margin:14px 0;position:relative}
.jzsep::before{content:'';position:absolute;left:0;right:0;top:50%;height:1px;background:var(--bd)}
.jzbdg{display:inline-block;background:var(--pri);color:var(--acl);padding:3px 14px;border-radius:20px;font-size:11px;border:1px solid var(--prl);position:relative;z-index:1}

/* nav */
.navf{padding:16px 24px;display:flex;justify-content:space-between;align-items:center;border-top:1px solid var(--bd);background:var(--bgc);position:sticky;bottom:0}
.bnav{padding:9px 20px;border-radius:10px;border:1px solid var(--bd);background:var(--bg);color:var(--ts);cursor:pointer;font-family:'Cairo',sans-serif;font-size:13px;transition:all .2s}
.bnav:hover:not(:disabled){background:var(--pri);color:#fff;border-color:var(--prl)}
.bnav:disabled{opacity:.4;cursor:not-allowed}
.pgind{font-size:12px;color:var(--tm)}

/* welcome */
.wlc{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:80vh;padding:40px;text-align:center}
.wbsm{font-family:'Scheherazade New',serif;font-size:44px;color:var(--acc);margin-bottom:18px;text-shadow:0 0 30px rgba(201,168,76,.4)}
.wtitle{font-size:20px;color:var(--ts);margin-bottom:8px}
.wdesc{font-size:13px;color:var(--tm);max-width:380px;line-height:1.9;margin-bottom:28px}
.wfeats{display:flex;gap:14px;flex-wrap:wrap;justify-content:center}
.wfeat{background:var(--bgc);border:1px solid var(--bd);border-radius:12px;padding:14px 18px;width:150px;text-align:center}
.wfeat .i{font-size:24px;margin-bottom:6px;display:block}
.wfeat .l{font-size:12px;color:var(--ts)}

/* loading */
.lov{display:none;align-items:center;justify-content:center;padding:60px;flex-direction:column;gap:14px}
.lov.on{display:flex}
.spin{width:42px;height:42px;border:3px solid var(--bd);border-top-color:var(--acc);border-radius:50%;animation:sp .8s linear infinite}
@keyframes sp{to{transform:rotate(360deg)}}
.ltxt{color:var(--tm);font-size:13px}

/* error */
.err{text-align:center;padding:50px 24px;color:var(--tm)}
.err .i{font-size:44px;margin-bottom:14px;display:block}

/* toast */
.toast{position:fixed;bottom:28px;left:50%;transform:translateX(-50%) translateY(100px);background:var(--prl);color:#fff;padding:11px 22px;border-radius:30px;font-size:13px;z-index:2000;transition:transform .3s;border:1px solid var(--acc)}
.toast.on{transform:translateX(-50%) translateY(0)}

@media(max-width:768px){
  .sdb{position:fixed;top:65px;right:0;height:calc(100vh - 65px);z-index:50;width:290px;transform:translateX(0);transition:transform .3s}
  .sdb.col{transform:translateX(100%);width:290px}
  .ayc{padding:12px 14px 36px}
  .chdr{padding:12px 14px}
  .aytxt{font-size:22px}
  .wbsm{font-size:32px}
}
</style>
</head>
<body>

<div class="toast" id="toast"></div>

<!-- HEADER -->
<header class="hdr">
  <div class="hbrand">
    <span class="hlogo">â˜ª</span>
    <div>
      <div class="htitle">Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</div>
      <div class="hsub">ØªØµÙÙ‘Ø­ Â· Ø§Ø¨Ø­Ø« Â· Ø§Ø­ÙØ¸</div>
    </div>
  </div>
  <div class="hacts">
    <button class="bico" onclick="toggleTheme()" title="ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø¸Ù‡Ø±" id="themeBtn">ğŸŒ™</button>
    <button class="bico" onclick="toggleSidebar()" title="Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©">â˜°</button>
  </div>
</header>

<div class="layout">

  <!-- SIDEBAR -->
  <div class="sdb" id="sdb">
    <div class="stabs">
      <div class="stab on" onclick="switchTab('surahs')" id="t-surahs">ğŸ“– Ø§Ù„Ø³ÙˆØ±</div>
      <div class="stab"    onclick="switchTab('search')"  id="t-search">ğŸ” Ø¨Ø­Ø«</div>
      <div class="stab"    onclick="switchTab('bm')"      id="t-bm">ğŸ”– Ù…Ø­ÙÙˆØ¸</div>
    </div>

    <!-- SURAHS PANEL -->
    <div class="spnl on" id="p-surahs">
      <div class="ssl"><input type="text" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø³ÙˆØ±Ø©..." oninput="filterSurahs(this.value)"></div>
      <div class="slist" id="surahList"></div>
    </div>

    <!-- SEARCH PANEL -->
    <div class="spnl" id="p-search">
      <div class="srca">
        <div class="stypes">
          <button class="stbtn on" onclick="setSType('surah')" id="st-surah">Ø³ÙˆØ±Ø©</button>
          <button class="stbtn"    onclick="setSType('juz')"   id="st-juz">Ø¬Ø²Ø¡</button>
          <button class="stbtn"    onclick="setSType('ayah')"  id="st-ayah">Ø¢ÙŠØ©</button>
        </div>
        <div class="srcrow">
          <input class="srci" id="srcInput" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø³ÙˆØ±Ø© (1-114)" onkeydown="if(event.key==='Enter')doSearch()">
          <button class="sbtn" onclick="doSearch()">Ø¨Ø­Ø«</button>
        </div>
        <div class="shint" id="srcHint">Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø³ÙˆØ±Ø© Ù…Ù† 1 Ø¥Ù„Ù‰ 114</div>
      </div>
      <div class="qlinks">
        <div class="ql-lbl">Ø³ÙˆØ± Ù…Ø®ØªØ§Ø±Ø©</div>
        <div class="ql-btns">
          <button class="qlb" onclick="loadSurah(1)">Ø§Ù„ÙØ§ØªØ­Ø©</button>
          <button class="qlb" onclick="loadSurah(2)">Ø§Ù„Ø¨Ù‚Ø±Ø©</button>
          <button class="qlb" onclick="loadSurah(18)">Ø§Ù„ÙƒÙ‡Ù</button>
          <button class="qlb" onclick="loadSurah(36)">ÙŠØ³</button>
          <button class="qlb" onclick="loadSurah(55)">Ø§Ù„Ø±Ø­Ù…Ù†</button>
          <button class="qlb" onclick="loadSurah(67)">Ø§Ù„Ù…Ù„Ùƒ</button>
          <button class="qlb" onclick="loadSurah(112)">Ø§Ù„Ø¥Ø®Ù„Ø§Øµ</button>
          <button class="qlb" onclick="loadJuz(1)">Ø§Ù„Ø¬Ø²Ø¡ 1</button>
          <button class="qlb" onclick="loadJuz(30)">Ø§Ù„Ø¬Ø²Ø¡ 30</button>
        </div>
      </div>
    </div>

    <!-- BOOKMARKS PANEL -->
    <div class="spnl" id="p-bm">
      <div class="bmhdr">
        <span class="bmtitle">Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ©</span>
        <button class="bmclear" onclick="clearAllBM()">Ø­Ø°Ù Ø§Ù„ÙƒÙ„</button>
      </div>
      <div class="bmlist" id="bmList"></div>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <div class="main" id="mainArea">

    <!-- WELCOME -->
    <div id="wlcScreen" class="wlc">
      <div class="wbsm">Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</div>
      <div class="wtitle">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</div>
      <div class="wdesc">Ø§Ø®ØªØ± Ø³ÙˆØ±Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©ØŒ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¨Ø­Ø« Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø³ÙˆØ±Ø© Ø£Ùˆ Ø¬Ø²Ø¡ Ø£Ùˆ Ø¢ÙŠØ© Ù…Ø­Ø¯Ø¯Ø©</div>
      <div class="wfeats">
        <div class="wfeat"><span class="i">ğŸ“–</span><span class="l">114 Ø³ÙˆØ±Ø© ÙƒØ§Ù…Ù„Ø©</span></div>
        <div class="wfeat"><span class="i">ğŸ”</span><span class="l">Ø¨Ø­Ø« Ù…ØªÙ‚Ø¯Ù…</span></div>
        <div class="wfeat"><span class="i">ğŸ”–</span><span class="l">Ø¥Ø´Ø§Ø±Ø§Øª Ù…Ø±Ø¬Ø¹ÙŠØ©</span></div>
        <div class="wfeat"><span class="i">ğŸŒ™</span><span class="l">ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ</span></div>
      </div>
    </div>

    <!-- LOADING -->
    <div class="lov" id="lov"><div class="spin"></div><div class="ltxt">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div></div>

    <!-- CONTENT -->
    <div id="cArea" style="display:none">
      <div class="chdr">
        <div class="cinfo">
          <div class="cname" id="cName">â€”</div>
          <div class="cbdgs" id="cBdgs"></div>
        </div>
        <div class="cacts">
          <button class="bact" id="bmCurBtn" onclick="bmCurrent()">ğŸ”– Ø­ÙØ¸</button>
        </div>
      </div>
      <div id="bsmArea"></div>
      <div class="ayc" id="ayc"></div>
      <div class="navf">
        <button class="bnav" id="prevBtn" onclick="navigate(-1)">â—„ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
        <span class="pgind" id="pgInd"></span>
        <button class="bnav" id="nextBtn" onclick="navigate(1)">Ø§Ù„ØªØ§Ù„ÙŠ â–º</button>
      </div>
    </div>
  </div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DATA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const SD = [
  [1,"Ø§Ù„ÙØ§ØªØ­Ø©",7,1,"Ù…ÙƒÙŠØ©"],[2,"Ø§Ù„Ø¨Ù‚Ø±Ø©",286,2,"Ù…Ø¯Ù†ÙŠØ©"],[3,"Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†",200,3,"Ù…Ø¯Ù†ÙŠØ©"],
  [4,"Ø§Ù„Ù†Ø³Ø§Ø¡",176,4,"Ù…Ø¯Ù†ÙŠØ©"],[5,"Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©",120,6,"Ù…Ø¯Ù†ÙŠØ©"],[6,"Ø§Ù„Ø£Ù†Ø¹Ø§Ù…",165,7,"Ù…ÙƒÙŠØ©"],
  [7,"Ø§Ù„Ø£Ø¹Ø±Ø§Ù",206,8,"Ù…ÙƒÙŠØ©"],[8,"Ø§Ù„Ø£Ù†ÙØ§Ù„",75,9,"Ù…Ø¯Ù†ÙŠØ©"],[9,"Ø§Ù„ØªÙˆØ¨Ø©",129,10,"Ù…Ø¯Ù†ÙŠØ©"],
  [10,"ÙŠÙˆÙ†Ø³",109,11,"Ù…ÙƒÙŠØ©"],[11,"Ù‡ÙˆØ¯",123,11,"Ù…ÙƒÙŠØ©"],[12,"ÙŠÙˆØ³Ù",111,12,"Ù…ÙƒÙŠØ©"],
  [13,"Ø§Ù„Ø±Ø¹Ø¯",43,13,"Ù…Ø¯Ù†ÙŠØ©"],[14,"Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…",52,13,"Ù…ÙƒÙŠØ©"],[15,"Ø§Ù„Ø­Ø¬Ø±",99,14,"Ù…ÙƒÙŠØ©"],
  [16,"Ø§Ù„Ù†Ø­Ù„",128,14,"Ù…ÙƒÙŠØ©"],[17,"Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡",111,15,"Ù…ÙƒÙŠØ©"],[18,"Ø§Ù„ÙƒÙ‡Ù",110,15,"Ù…ÙƒÙŠØ©"],
  [19,"Ù…Ø±ÙŠÙ…",98,16,"Ù…ÙƒÙŠØ©"],[20,"Ø·Ù‡",135,16,"Ù…ÙƒÙŠØ©"],[21,"Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡",112,17,"Ù…ÙƒÙŠØ©"],
  [22,"Ø§Ù„Ø­Ø¬",78,17,"Ù…Ø¯Ù†ÙŠØ©"],[23,"Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†",118,18,"Ù…ÙƒÙŠØ©"],[24,"Ø§Ù„Ù†ÙˆØ±",64,18,"Ù…Ø¯Ù†ÙŠØ©"],
  [25,"Ø§Ù„ÙØ±Ù‚Ø§Ù†",77,19,"Ù…ÙƒÙŠØ©"],[26,"Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡",227,19,"Ù…ÙƒÙŠØ©"],[27,"Ø§Ù„Ù†Ù…Ù„",93,19,"Ù…ÙƒÙŠØ©"],
  [28,"Ø§Ù„Ù‚ØµØµ",88,20,"Ù…ÙƒÙŠØ©"],[29,"Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª",69,20,"Ù…ÙƒÙŠØ©"],[30,"Ø§Ù„Ø±ÙˆÙ…",60,21,"Ù…ÙƒÙŠØ©"],
  [31,"Ù„Ù‚Ù…Ø§Ù†",34,21,"Ù…ÙƒÙŠØ©"],[32,"Ø§Ù„Ø³Ø¬Ø¯Ø©",30,21,"Ù…ÙƒÙŠØ©"],[33,"Ø§Ù„Ø£Ø­Ø²Ø§Ø¨",73,21,"Ù…Ø¯Ù†ÙŠØ©"],
  [34,"Ø³Ø¨Ø£",54,22,"Ù…ÙƒÙŠØ©"],[35,"ÙØ§Ø·Ø±",45,22,"Ù…ÙƒÙŠØ©"],[36,"ÙŠØ³",83,22,"Ù…ÙƒÙŠØ©"],
  [37,"Ø§Ù„ØµØ§ÙØ§Øª",182,23,"Ù…ÙƒÙŠØ©"],[38,"Øµ",88,23,"Ù…ÙƒÙŠØ©"],[39,"Ø§Ù„Ø²Ù…Ø±",75,23,"Ù…ÙƒÙŠØ©"],
  [40,"ØºØ§ÙØ±",85,24,"Ù…ÙƒÙŠØ©"],[41,"ÙØµÙ„Øª",54,24,"Ù…ÙƒÙŠØ©"],[42,"Ø§Ù„Ø´ÙˆØ±Ù‰",53,25,"Ù…ÙƒÙŠØ©"],
  [43,"Ø§Ù„Ø²Ø®Ø±Ù",89,25,"Ù…ÙƒÙŠØ©"],[44,"Ø§Ù„Ø¯Ø®Ø§Ù†",59,25,"Ù…ÙƒÙŠØ©"],[45,"Ø§Ù„Ø¬Ø§Ø«ÙŠØ©",37,25,"Ù…ÙƒÙŠØ©"],
  [46,"Ø§Ù„Ø£Ø­Ù‚Ø§Ù",35,26,"Ù…ÙƒÙŠØ©"],[47,"Ù…Ø­Ù…Ø¯",38,26,"Ù…Ø¯Ù†ÙŠØ©"],[48,"Ø§Ù„ÙØªØ­",29,26,"Ù…Ø¯Ù†ÙŠØ©"],
  [49,"Ø§Ù„Ø­Ø¬Ø±Ø§Øª",18,26,"Ù…Ø¯Ù†ÙŠØ©"],[50,"Ù‚",45,26,"Ù…ÙƒÙŠØ©"],[51,"Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª",60,27,"Ù…ÙƒÙŠØ©"],
  [52,"Ø§Ù„Ø·ÙˆØ±",49,27,"Ù…ÙƒÙŠØ©"],[53,"Ø§Ù„Ù†Ø¬Ù…",62,27,"Ù…ÙƒÙŠØ©"],[54,"Ø§Ù„Ù‚Ù…Ø±",55,27,"Ù…ÙƒÙŠØ©"],
  [55,"Ø§Ù„Ø±Ø­Ù…Ù†",78,27,"Ù…Ø¯Ù†ÙŠØ©"],[56,"Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©",96,27,"Ù…ÙƒÙŠØ©"],[57,"Ø§Ù„Ø­Ø¯ÙŠØ¯",29,27,"Ù…Ø¯Ù†ÙŠØ©"],
  [58,"Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©",22,28,"Ù…Ø¯Ù†ÙŠØ©"],[59,"Ø§Ù„Ø­Ø´Ø±",24,28,"Ù…Ø¯Ù†ÙŠØ©"],[60,"Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©",13,28,"Ù…Ø¯Ù†ÙŠØ©"],
  [61,"Ø§Ù„ØµÙ",14,28,"Ù…Ø¯Ù†ÙŠØ©"],[62,"Ø§Ù„Ø¬Ù…Ø¹Ø©",11,28,"Ù…Ø¯Ù†ÙŠØ©"],[63,"Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†",11,28,"Ù…Ø¯Ù†ÙŠØ©"],
  [64,"Ø§Ù„ØªØºØ§Ø¨Ù†",18,28,"Ù…Ø¯Ù†ÙŠØ©"],[65,"Ø§Ù„Ø·Ù„Ø§Ù‚",12,28,"Ù…Ø¯Ù†ÙŠØ©"],[66,"Ø§Ù„ØªØ­Ø±ÙŠÙ…",12,28,"Ù…Ø¯Ù†ÙŠØ©"],
  [67,"Ø§Ù„Ù…Ù„Ùƒ",30,29,"Ù…ÙƒÙŠØ©"],[68,"Ø§Ù„Ù‚Ù„Ù…",52,29,"Ù…ÙƒÙŠØ©"],[69,"Ø§Ù„Ø­Ø§Ù‚Ø©",52,29,"Ù…ÙƒÙŠØ©"],
  [70,"Ø§Ù„Ù…Ø¹Ø§Ø±Ø¬",44,29,"Ù…ÙƒÙŠØ©"],[71,"Ù†ÙˆØ­",28,29,"Ù…ÙƒÙŠØ©"],[72,"Ø§Ù„Ø¬Ù†",28,29,"Ù…ÙƒÙŠØ©"],
  [73,"Ø§Ù„Ù…Ø²Ù…Ù„",20,29,"Ù…ÙƒÙŠØ©"],[74,"Ø§Ù„Ù…Ø¯Ø«Ø±",56,29,"Ù…ÙƒÙŠØ©"],[75,"Ø§Ù„Ù‚ÙŠØ§Ù…Ø©",40,29,"Ù…ÙƒÙŠØ©"],
  [76,"Ø§Ù„Ø¥Ù†Ø³Ø§Ù†",31,29,"Ù…Ø¯Ù†ÙŠØ©"],[77,"Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª",50,29,"Ù…ÙƒÙŠØ©"],[78,"Ø§Ù„Ù†Ø¨Ø£",40,30,"Ù…ÙƒÙŠØ©"],
  [79,"Ø§Ù„Ù†Ø§Ø²Ø¹Ø§Øª",46,30,"Ù…ÙƒÙŠØ©"],[80,"Ø¹Ø¨Ø³",42,30,"Ù…ÙƒÙŠØ©"],[81,"Ø§Ù„ØªÙƒÙˆÙŠØ±",29,30,"Ù…ÙƒÙŠØ©"],
  [82,"Ø§Ù„Ø§Ù†ÙØ·Ø§Ø±",19,30,"Ù…ÙƒÙŠØ©"],[83,"Ø§Ù„Ù…Ø·ÙÙÙŠÙ†",36,30,"Ù…ÙƒÙŠØ©"],[84,"Ø§Ù„Ø§Ù†Ø´Ù‚Ø§Ù‚",25,30,"Ù…ÙƒÙŠØ©"],
  [85,"Ø§Ù„Ø¨Ø±ÙˆØ¬",22,30,"Ù…ÙƒÙŠØ©"],[86,"Ø§Ù„Ø·Ø§Ø±Ù‚",17,30,"Ù…ÙƒÙŠØ©"],[87,"Ø§Ù„Ø£Ø¹Ù„Ù‰",19,30,"Ù…ÙƒÙŠØ©"],
  [88,"Ø§Ù„ØºØ§Ø´ÙŠØ©",26,30,"Ù…ÙƒÙŠØ©"],[89,"Ø§Ù„ÙØ¬Ø±",30,30,"Ù…ÙƒÙŠØ©"],[90,"Ø§Ù„Ø¨Ù„Ø¯",20,30,"Ù…ÙƒÙŠØ©"],
  [91,"Ø§Ù„Ø´Ù…Ø³",15,30,"Ù…ÙƒÙŠØ©"],[92,"Ø§Ù„Ù„ÙŠÙ„",21,30,"Ù…ÙƒÙŠØ©"],[93,"Ø§Ù„Ø¶Ø­Ù‰",11,30,"Ù…ÙƒÙŠØ©"],
  [94,"Ø§Ù„Ø´Ø±Ø­",8,30,"Ù…ÙƒÙŠØ©"],[95,"Ø§Ù„ØªÙŠÙ†",8,30,"Ù…ÙƒÙŠØ©"],[96,"Ø§Ù„Ø¹Ù„Ù‚",19,30,"Ù…ÙƒÙŠØ©"],
  [97,"Ø§Ù„Ù‚Ø¯Ø±",5,30,"Ù…ÙƒÙŠØ©"],[98,"Ø§Ù„Ø¨ÙŠÙ†Ø©",8,30,"Ù…Ø¯Ù†ÙŠØ©"],[99,"Ø§Ù„Ø²Ù„Ø²Ù„Ø©",8,30,"Ù…Ø¯Ù†ÙŠØ©"],
  [100,"Ø§Ù„Ø¹Ø§Ø¯ÙŠØ§Øª",11,30,"Ù…ÙƒÙŠØ©"],[101,"Ø§Ù„Ù‚Ø§Ø±Ø¹Ø©",11,30,"Ù…ÙƒÙŠØ©"],[102,"Ø§Ù„ØªÙƒØ§Ø«Ø±",8,30,"Ù…ÙƒÙŠØ©"],
  [103,"Ø§Ù„Ø¹ØµØ±",3,30,"Ù…ÙƒÙŠØ©"],[104,"Ø§Ù„Ù‡Ù…Ø²Ø©",9,30,"Ù…ÙƒÙŠØ©"],[105,"Ø§Ù„ÙÙŠÙ„",5,30,"Ù…ÙƒÙŠØ©"],
  [106,"Ù‚Ø±ÙŠØ´",4,30,"Ù…ÙƒÙŠØ©"],[107,"Ø§Ù„Ù…Ø§Ø¹ÙˆÙ†",7,30,"Ù…ÙƒÙŠØ©"],[108,"Ø§Ù„ÙƒÙˆØ«Ø±",3,30,"Ù…ÙƒÙŠØ©"],
  [109,"Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ†",6,30,"Ù…ÙƒÙŠØ©"],[110,"Ø§Ù„Ù†ØµØ±",3,30,"Ù…Ø¯Ù†ÙŠØ©"],[111,"Ø§Ù„Ù…Ø³Ø¯",5,30,"Ù…ÙƒÙŠØ©"],
  [112,"Ø§Ù„Ø¥Ø®Ù„Ø§Øµ",4,30,"Ù…ÙƒÙŠØ©"],[113,"Ø§Ù„ÙÙ„Ù‚",5,30,"Ù…ÙƒÙŠØ©"],[114,"Ø§Ù„Ù†Ø§Ø³",6,30,"Ù…ÙƒÙŠØ©"]
];

const API = 'https://api.alquran.cloud/v1';
let mode = 'surah', cur = null, stype = 'surah';
let BM = JSON.parse(localStorage.getItem('qbm') || '[]');
let ayahTexts = {};
let lightMode = localStorage.getItem('qtheme') === 'light';

if (lightMode) { document.body.classList.add('lm'); document.getElementById('themeBtn').textContent = 'â˜€ï¸'; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function init() {
  renderSurahList(SD);
  renderBM();
  const last = localStorage.getItem('qlast');
  if (last) { const d = JSON.parse(last); d.type === 'surah' ? loadSurah(d.n) : loadJuz(d.n); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function toggleSidebar() { document.getElementById('sdb').classList.toggle('col'); }

function switchTab(t) {
  ['surahs','search','bm'].forEach(x => {
    document.getElementById('t-'+x).classList.toggle('on', x===t);
    document.getElementById('p-'+x).classList.toggle('on', x===t);
  });
}

function toggleTheme() {
  lightMode = !lightMode;
  document.body.classList.toggle('lm', lightMode);
  document.getElementById('themeBtn').textContent = lightMode ? 'â˜€ï¸' : 'ğŸŒ™';
  localStorage.setItem('qtheme', lightMode ? 'light' : 'dark');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SURAH LIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function renderSurahList(data) {
  document.getElementById('surahList').innerHTML = data.map(s =>
    `<div class="si" id="si-${s[0]}" onclick="loadSurah(${s[0]})">
      <div class="sinum">${s[0]}</div>
      <div class="siinfo">
        <div class="siname">${s[1]}</div>
        <div class="simeta">${s[4]} Â· ${s[2]} Ø¢ÙŠØ©</div>
      </div>
      <div class="sivs">Ø¬${s[3]}</div>
    </div>`
  ).join('');
}

function filterSurahs(q) {
  renderSurahList(SD.filter(s => s[1].includes(q) || String(s[0]).includes(q)));
}

function setActiveSurah(n) {
  document.querySelectorAll('.si').forEach(e => e.classList.remove('on'));
  const el = document.getElementById('si-'+n);
  if (el) { el.classList.add('on'); el.scrollIntoView({block:'nearest'}); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SEARCH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function setSType(t) {
  stype = t;
  document.querySelectorAll('.stbtn').forEach(b => b.classList.remove('on'));
  document.getElementById('st-'+t).classList.add('on');
  const inp = document.getElementById('srcInput');
  const hints = {surah:'Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø³ÙˆØ±Ø© Ù…Ù† 1 Ø¥Ù„Ù‰ 114', juz:'Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¬Ø²Ø¡ Ù…Ù† 1 Ø¥Ù„Ù‰ 30', ayah:'Ù…Ø«Ø§Ù„: 2:255 (Ø³ÙˆØ±Ø©:Ø¢ÙŠØ©)'};
  const phlds = {surah:'Ø±Ù‚Ù… Ø§Ù„Ø³ÙˆØ±Ø© (1-114)', juz:'Ø±Ù‚Ù… Ø§Ù„Ø¬Ø²Ø¡ (1-30)', ayah:'Ø³ÙˆØ±Ø©:Ø¢ÙŠØ©  Ù…Ø«Ø§Ù„ 2:255'};
  inp.placeholder = phlds[t];
  document.getElementById('srcHint').textContent = hints[t];
  inp.value = '';
}

function doSearch() {
  const v = document.getElementById('srcInput').value.trim();
  if (!v) return;
  if (stype === 'surah') {
    const n = parseInt(v);
    n>=1 && n<=114 ? loadSurah(n) : toast('Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù…Ù‹Ø§ Ø¨ÙŠÙ† 1 Ùˆ 114');
  } else if (stype === 'juz') {
    const n = parseInt(v);
    n>=1 && n<=30 ? loadJuz(n) : toast('Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù…Ù‹Ø§ Ø¨ÙŠÙ† 1 Ùˆ 30');
  } else {
    const p = v.split(':');
    if (p.length===2) { const s=parseInt(p[0]), a=parseInt(p[1]); loadAyah(s,a); }
    else toast('Ø§Ù„ØµÙŠØºØ© Ø§Ù„ØµØ­ÙŠØ­Ø©: Ø±Ù‚Ù…_Ø§Ù„Ø³ÙˆØ±Ø©:Ø±Ù‚Ù…_Ø§Ù„Ø¢ÙŠØ©');
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   API LOADERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function loadSurah(n) {
  showLoad(); mode='surah'; cur=n;
  try {
    const r = await fetch(`${API}/surah/${n}`);
    const d = await r.json();
    if (d.code===200) {
      displaySurah(d.data);
      localStorage.setItem('qlast', JSON.stringify({type:'surah',n}));
      setActiveSurah(n);
    } else showErr();
  } catch { showErr(); }
  hideLoad();
}

async function loadJuz(n) {
  showLoad(); mode='juz'; cur=n;
  try {
    const r = await fetch(`${API}/juz/${n}`);
    const d = await r.json();
    if (d.code===200) {
      displayJuz(d.data, n);
      localStorage.setItem('qlast', JSON.stringify({type:'juz',n}));
    } else showErr();
  } catch { showErr(); }
  hideLoad();
}

async function loadAyah(s, a) {
  showLoad();
  try {
    const r = await fetch(`${API}/ayah/${s}:${a}`);
    const d = await r.json();
    if (d.code===200) {
      await loadSurah(s);
      setTimeout(() => scrollToAyah(a), 600);
    } else { showErr(); toast('Ù„Ù… ÙŠÙØ¹Ø«Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¢ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©'); }
  } catch { showErr(); }
  hideLoad();
}

function scrollToAyah(n) {
  const el = document.getElementById('ay-'+n);
  if (el) { el.scrollIntoView({behavior:'smooth',block:'center'}); el.classList.add('hl'); setTimeout(()=>el.classList.remove('hl'),3000); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DISPLAY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function displaySurah(s) {
  showContent();
  ayahTexts = {};
  const sd = SD.find(x=>x[0]===s.number);
  document.getElementById('cName').textContent = 'Ø³ÙˆØ±Ø© ' + s.name;
  document.getElementById('cBdgs').innerHTML =
    `<span class="bdg">Ø§Ù„Ø¬Ø²Ø¡ ${sd?sd[3]:''}</span>
     <span class="bdg">${sd?sd[4]:''}</span>
     <span class="bdg">${s.numberOfAyahs} Ø¢ÙŠØ©</span>`;
  document.getElementById('bsmArea').innerHTML =
    (s.number!==9 && s.number!==1) ?
    '<div class="bsm">Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</div>' : '';
  document.getElementById('ayc').innerHTML = s.ayahs.map(a => ayCard(a, s.number, s.name)).join('');
  document.getElementById('prevBtn').disabled = s.number<=1;
  document.getElementById('nextBtn').disabled = s.number>=114;
  document.getElementById('pgInd').textContent = `Ø³ÙˆØ±Ø© ${s.number} / 114`;
  document.getElementById('mainArea').scrollTop = 0;
  updBmBtn();
}

function displayJuz(juz, n) {
  showContent(); ayahTexts = {};
  document.getElementById('cName').textContent = 'Ø§Ù„Ø¬Ø²Ø¡ ' + n;
  document.getElementById('cBdgs').innerHTML = `<span class="bdg">${juz.ayahs.length} Ø¢ÙŠØ©</span>`;
  document.getElementById('bsmArea').innerHTML = '';
  let html = '', lastS = null;
  juz.ayahs.forEach(a => {
    if (a.surah.number !== lastS) {
      html += `<div class="jzsep"><span class="jzbdg">Ø³ÙˆØ±Ø© ${a.surah.name} Â· Ø±Ù‚Ù… ${a.surah.number}</span></div>`;
      lastS = a.surah.number;
    }
    html += ayCard(a, a.surah.number, a.surah.name);
  });
  document.getElementById('ayc').innerHTML = html;
  document.getElementById('prevBtn').disabled = n<=1;
  document.getElementById('nextBtn').disabled = n>=30;
  document.getElementById('pgInd').textContent = `Ø§Ù„Ø¬Ø²Ø¡ ${n} / 30`;
  document.getElementById('mainArea').scrollTop = 0;
  updBmBtn();
}

function ayCard(a, sn, sname) {
  ayahTexts[`${sn}:${a.numberInSurah}`] = a.text;
  const mk = BM.some(b=>b.type==='ayah'&&b.sn===sn&&b.an===a.numberInSurah);
  return `<div class="aycard" id="ay-${a.numberInSurah}">
    <div class="ayhdr">
      <div class="aynum">${a.numberInSurah}</div>
      <div class="aybtns">
        <button class="aybtn ${mk?'mk':''}" title="Ø¥Ø´Ø§Ø±Ø© Ù…Ø±Ø¬Ø¹ÙŠØ©"
          onclick="toggleAyBM(${sn},${a.numberInSurah},'${sname}',this)">ğŸ”–</button>
        <button class="aybtn" title="Ù†Ø³Ø® Ø§Ù„Ø¢ÙŠØ©"
          onclick="copyAy(${sn},${a.numberInSurah})">ğŸ“‹</button>
      </div>
    </div>
    <div class="aytxt">${a.text}<span class="ayend">${a.numberInSurah}</span></div>
    <div class="aybar">
      <span class="ayref">${sname} (${sn}:${a.numberInSurah})${a.juz?' Â· Ø§Ù„Ø¬Ø²Ø¡ '+a.juz:''}${a.page?' Â· ØµÙØ­Ø© '+a.page:''}</span>
    </div>
  </div>`;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NAVIGATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function navigate(d) {
  if (mode==='surah') { const n=cur+d; if(n>=1&&n<=114) loadSurah(n); }
  else { const n=cur+d; if(n>=1&&n<=30) loadJuz(n); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BOOKMARKS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function toggleAyBM(sn, an, sname, btn) {
  const idx = BM.findIndex(b=>b.type==='ayah'&&b.sn===sn&&b.an===an);
  if (idx>=0) { BM.splice(idx,1); btn.classList.remove('mk'); toast('Ø­ÙØ°ÙØª Ø§Ù„Ø¥Ø´Ø§Ø±Ø©'); }
  else { BM.push({type:'ayah',sn,an,title:`${sname} â€“ Ø§Ù„Ø¢ÙŠØ© ${an}`,dt:new Date().toLocaleDateString('ar')}); btn.classList.add('mk'); toast('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥Ø´Ø§Ø±Ø©'); }
  saveBM(); renderBM();
}

function bmCurrent() {
  if (!cur) return;
  if (mode==='surah') {
    const sd=SD.find(x=>x[0]===cur);
    const idx=BM.findIndex(b=>b.type==='surah'&&b.n===cur);
    if (idx>=0) { BM.splice(idx,1); toast('Ø­ÙØ°ÙØª Ø¥Ø´Ø§Ø±Ø© Ø§Ù„Ø³ÙˆØ±Ø©'); }
    else { BM.push({type:'surah',n:cur,title:`Ø³ÙˆØ±Ø© ${sd?sd[1]:cur}`,dt:new Date().toLocaleDateString('ar')}); toast('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø¥Ø´Ø§Ø±Ø© Ù„Ù„Ø³ÙˆØ±Ø©'); }
  } else {
    const idx=BM.findIndex(b=>b.type==='juz'&&b.n===cur);
    if (idx>=0) { BM.splice(idx,1); toast('Ø­ÙØ°ÙØª Ø¥Ø´Ø§Ø±Ø© Ø§Ù„Ø¬Ø²Ø¡'); }
    else { BM.push({type:'juz',n:cur,title:`Ø§Ù„Ø¬Ø²Ø¡ ${cur}`,dt:new Date().toLocaleDateString('ar')}); toast('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø¥Ø´Ø§Ø±Ø© Ù„Ù„Ø¬Ø²Ø¡'); }
  }
  saveBM(); renderBM(); updBmBtn();
}

function updBmBtn() {
  const btn=document.getElementById('bmCurBtn'); if(!btn) return;
  let mk = mode==='surah' ? BM.some(b=>b.type==='surah'&&b.n===cur) : BM.some(b=>b.type==='juz'&&b.n===cur);
  btn.classList.toggle('mk', mk);
  btn.textContent = mk ? 'ğŸ”– Ù…Ø­ÙÙˆØ¸' : 'ğŸ”– Ø­ÙØ¸';
}

function renderBM() {
  const el=document.getElementById('bmList');
  if (!BM.length) { el.innerHTML='<div class="nobm"><span class="i">ğŸ”–</span>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø§Ø±Ø§Øª Ù…Ø±Ø¬Ø¹ÙŠØ© Ø¨Ø¹Ø¯<br><small>Ø£Ø¶ÙÙ‡Ø§ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</small></div>'; return; }
  el.innerHTML = BM.map((b,i)=>`
    <div class="bmi" onclick="goBM(${i})">
      <span class="bmico">${b.type==='surah'?'ğŸ“–':b.type==='juz'?'ğŸ“š':'ğŸ“'}</span>
      <div class="bmtxt">
        <div class="bmname">${b.title}</div>
        <div class="bmtype">${b.type==='surah'?'Ø³ÙˆØ±Ø©':b.type==='juz'?'Ø¬Ø²Ø¡':'Ø¢ÙŠØ©'} Â· ${b.dt}</div>
      </div>
      <button class="bmdel" onclick="delBM(event,${i})">âœ•</button>
    </div>`).join('');
}

function goBM(i) {
  const b=BM[i];
  if (b.type==='surah') loadSurah(b.n);
  else if (b.type==='juz') loadJuz(b.n);
  else loadSurah(b.sn).then(()=>setTimeout(()=>scrollToAyah(b.an),600));
}

function delBM(e, i) { e.stopPropagation(); BM.splice(i,1); saveBM(); renderBM(); toast('Ø­ÙØ°ÙØª Ø§Ù„Ø¥Ø´Ø§Ø±Ø©'); }

function clearAllBM() {
  if (!BM.length) return;
  if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø§Ø±Ø§ØªØŸ')) { BM=[]; saveBM(); renderBM(); toast('Ø­ÙØ°ÙØª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª'); updBmBtn(); }
}

function saveBM() { localStorage.setItem('qbm', JSON.stringify(BM)); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UTILS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function copyAy(sn, an) {
  const txt=ayahTexts[`${sn}:${an}`]||'';
  navigator.clipboard.writeText(txt).then(()=>toast('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¢ÙŠØ©')).catch(()=>toast('ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ù†Ø³Ø®'));
}

function showLoad() {
  document.getElementById('wlcScreen').style.display='none';
  document.getElementById('cArea').style.display='none';
  document.getElementById('lov').classList.add('on');
}
function hideLoad() { document.getElementById('lov').classList.remove('on'); }
function showContent() {
  document.getElementById('lov').classList.remove('on');
  document.getElementById('wlcScreen').style.display='none';
  document.getElementById('cArea').style.display='block';
}
function showErr() {
  hideLoad(); showContent();
  document.getElementById('ayc').innerHTML='<div class="err"><span class="i">âš ï¸</span>ØªØ¹Ø°Ù‘Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ£Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©.</div>';
}

let _tt=null;
function toast(msg) {
  const el=document.getElementById('toast'); el.textContent=msg; el.classList.add('on');
  if(_tt) clearTimeout(_tt); _tt=setTimeout(()=>el.classList.remove('on'),2600);
}

init();
</script>
</body>
</html>
