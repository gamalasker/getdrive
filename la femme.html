<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>frenchapeau - Ø¯Ø±Ø³ ØªÙØ§Ø¹Ù„ÙŠ Ù…Ø­Ø³Ù‘Ù†</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4f46e5;
            --secondary-color: #10b981;
            --accent-color: #f59e0b;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --background-light: #f8fafc;
            --border-color: #e5e7eb;
            --shadow-light: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            --shadow-medium: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-heavy: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .arabic-text {
            font-family: 'Cairo', sans-serif;
        }

        .french-text {
            font-family: 'Roboto', sans-serif;
            direction: ltr;
            text-align: left;
        }

        .fade-in {
            animation: fadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .slide-in {
            animation: slideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .scale-in {
            animation: scaleIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes fadeIn {
            from { 
                opacity: 0; 
                transform: translateY(30px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateX(-30px); 
            }
            to { 
                opacity: 1; 
                transform: translateX(0); 
            }
        }

        @keyframes scaleIn {
            from { 
                opacity: 0; 
                transform: scale(0.9); 
            }
            to { 
                opacity: 1; 
                transform: scale(1); 
            }
        }

        .progress-bar {
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        .question-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
        }

        .question-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-heavy);
        }

        .option-button {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .option-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }

        .option-button:hover::before {
            left: 100%;
        }

        .option-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .option-button.selected {
            background: linear-gradient(135deg, var(--primary-color), #6366f1);
            color: white;
            border-color: var(--primary-color);
            transform: scale(1.02);
        }

        .option-button.correct {
            background: linear-gradient(135deg, var(--secondary-color), #059669);
            color: white;
            border-color: var(--secondary-color);
        }

        .option-button.incorrect {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            border-color: #ef4444;
        }

        .level-badge {
            background: linear-gradient(135deg, var(--accent-color), #f97316);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .floating-element {
            position: absolute;
            opacity: 0.1;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }

        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .confetti {
            position: fixed;
            top: -10px;
            z-index: 1000;
            pointer-events: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .question-card {
                padding: 1rem;
            }
        }

        .dark-mode {
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --background-light: #374151;
            --border-color: #4b5563;
        }

        /* Performance optimizations */
        .will-change-transform {
            will-change: transform;
        }

        .gpu-acceleration {
            transform: translateZ(0);
        }
    </style>
</head>
<body class="min-h-screen relative overflow-x-hidden">
    <!-- Floating Background Elements -->
    <div class="floating-elements">
        <div class="floating-element text-6xl" style="top: 10%; left: 10%; animation-delay: 0s;">ğŸ‡«ğŸ‡·</div>
        <div class="floating-element text-4xl" style="top: 20%; right: 15%; animation-delay: 1s;">ğŸ“š</div>
        <div class="floating-element text-5xl" style="bottom: 20%; left: 20%; animation-delay: 2s;">ğŸ¯</div>
        <div class="floating-element text-3xl" style="top: 60%; right: 25%; animation-delay: 3s;">â­</div>
    </div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="fixed inset-0 z-50 flex items-center justify-center glass-effect">
        <div class="text-center">
            <div class="w-16 h-16 border-4 border-white border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
            <p class="text-white text-xl font-semibold">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
        </div>
    </div>

    <!-- Header -->
    <header class="glass-effect shadow-lg relative">
        <div class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <div class="text-center flex-1">
                    <h1 class="text-3xl md:text-4xl font-bold text-white drop-shadow-lg">ğŸ‡«ğŸ‡· ØªØ¹Ù„Ù… Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©</h1>
                    <p class="text-white/80 mt-2">Ø¯Ø±Ø³ ØªÙØ§Ø¹Ù„ÙŠ Ù…Ø­Ø³Ù‘Ù† Ù…Ø¹ Ø§Ø®ØªØ¨Ø§Ø± Ø°ÙƒÙŠ</p>
                </div>
                <button id="darkModeToggle" class="p-2 rounded-full bg-white/20 hover:bg-white/30 transition-all">
                    <span class="text-2xl">ğŸŒ™</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container mx-auto px-6 py-8 max-w-5xl">
        <!-- Video Section -->
        <div id="videoSection" class="fade-in">
            <div class="glass-effect rounded-2xl shadow-xl p-6 mb-8 question-card">
                <h2 class="text-2xl md:text-3xl font-bold text-white mb-6 flex items-center">
                    ğŸ“¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ
                    <span class="mr-auto text-sm bg-red-500 text-white px-3 py-1 rounded-full">Ù…Ø¨Ø§Ø´Ø±</span>
                </h2>
                
                <!-- Video Player with Enhanced UI -->
                <div class="relative mb-6">
                    <div id="videoPlayer" class="aspect-video bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl overflow-hidden shadow-lg">
                        <iframe class="w-full h-full" 
                                src="https://www.youtube.com/embed/Y_cd0hfCu-s" 
                                frameborder="0" 
                                allowfullscreen
                                loading="lazy">
                        </iframe>
                    </div>
                    <!-- Video Controls Overlay -->
                    <div class="absolute bottom-4 left-4 flex gap-2">
                        <button class="bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-all">
                            â¸ï¸
                        </button>
                        <button class="bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-all">
                            ğŸ”Š
                        </button>
                        <button class="bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-all">
                            âš™ï¸
                        </button>
                    </div>
                </div>

                <!-- Enhanced Video Description -->
                <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 mb-6">
                    <h3 class="font-bold text-white mb-3 text-xl flex items-center">
                        ğŸ“ ÙˆØµÙ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
                        <span class="mr-auto text-sm bg-blue-500 px-2 py-1 rounded">5 Ø¯Ù‚Ø§Ø¦Ù‚</span>
                    </h3>
                    <p class="text-white/90 leading-relaxed text-lg">
                        Ù‡Ø°Ø§ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙŠØ­ÙƒÙŠ Ù‚ØµØ© "Ø¨ÙŠØªÙŠ" Ø§Ù„Ø¨Ø§Ù„ØºØ© Ù…Ù† Ø§Ù„Ø¹Ù…Ø± 85 Ø¹Ø§Ù…Ø§Ù‹ ÙˆØ§Ù„ØªÙŠ ØªØ¹ÙŠØ´ ÙÙŠ Ø§Ù„Ø·Ø§Ø¨Ù‚ Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø¨Ø¯ÙˆÙ† Ù…ØµØ¹Ø¯. 
                        ØªÙ…Ø´ÙŠ Ø¨ÙŠØªÙŠ Ø£ÙƒØ«Ø± Ù…Ù† 10 ÙƒÙŠÙ„ÙˆÙ…ØªØ±Ø§Øª ÙŠÙˆÙ…ÙŠØ§Ù‹ ÙˆØªØ´Ø§Ø±Ùƒ Ù‚ØµØªÙ‡Ø§ ÙˆØ­ÙƒÙ…ØªÙ‡Ø§ Ø­ÙˆÙ„ Ø£Ù‡Ù…ÙŠØ© Ø§Ù„Ø­Ø±ÙƒØ© ÙˆØ§Ù„Ù…Ø´ÙŠ ÙÙŠ Ø§Ù„Ø­ÙŠØ§Ø©. 
                        Ø³ØªØªØ¹Ù„Ù… Ù…Ù† Ø®Ù„Ø§Ù„ Ù‡Ø°Ø§ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…ÙØ±Ø¯Ø§Øª ÙØ±Ù†Ø³ÙŠØ© Ù…ÙÙŠØ¯Ø© Ø­ÙˆÙ„ Ø§Ù„Ø­ÙŠØ§Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ© ÙˆØ§Ù„ØµØ­Ø© ÙˆØ§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø¨Ø¯Ù†ÙŠ.
                    </p>
                    
                    <!-- Key Learning Points -->
                    <div class="mt-4 grid md:grid-cols-2 gap-4">
                        <div class="bg-white/10 rounded-lg p-3">
                            <h4 class="font-semibold text-white mb-2">ğŸ¯ Ù†Ù‚Ø§Ø· Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:</h4>
                            <ul class="text-white/80 text-sm space-y-1">
                                <li>â€¢ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙˆØ§Ù„Ø£Ø¹Ù…Ø§Ø±</li>
                                <li>â€¢ ÙˆØµÙ Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</li>
                                <li>â€¢ Ø§Ù„Ù…ÙØ±Ø¯Ø§Øª Ø§Ù„Ù…ØªØ¹Ù„Ù‚Ø© Ø¨Ø§Ù„ØµØ­Ø©</li>
                                <li>â€¢ Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø¹Ù† Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„Ù…Ø³Ø§ÙØ§Øª</li>
                            </ul>
                        </div>
                        <div class="bg-white/10 rounded-lg p-3">
                            <h4 class="font-semibold text-white mb-2">â±ï¸ Ù…Ø¯Ø© Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©:</h4>
                            <p class="text-white/80 text-sm">Ø´Ø§Ù‡Ø¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ø±ØªÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙØ¶Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</p>
                        </div>
                    </div>
                </div>

                <button onclick="startQuiz()" 
                        class="w-full mt-6 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white py-4 rounded-xl font-bold text-lg transition-all transform hover:scale-105 shadow-lg will-change-transform">
                    ğŸš€ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ
                </button>
            </div>
        </div>

        <!-- Quiz Section -->
        <div id="quizSection" class="hidden fade-in">
            <div class="glass-effect rounded-2xl shadow-xl p-6 mb-8 question-card">
                <!-- Enhanced Progress Bar -->
                <div class="mb-8">
                    <div class="flex justify-between items-center mb-3">
                        <span class="text-sm font-bold text-white">Ø§Ù„ØªÙ‚Ø¯Ù…</span>
                        <span id="progressText" class="text-sm font-bold text-white bg-white/20 px-3 py-1 rounded-full">1 Ù…Ù† 20</span>
                    </div>
                    <div class="w-full bg-white/20 rounded-full h-4 overflow-hidden">
                        <div id="progressBar" class="progress-bar h-4 rounded-full shadow-inner" style="width: 5%"></div>
                    </div>
                    <div class="flex justify-between text-xs text-white/70 mt-2">
                        <span>Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©</span>
                        <span id="progressPercentage">5%</span>
                        <span>Ø§Ù„Ù†Ù‡Ø§ÙŠØ©</span>
                    </div>
                </div>

                <!-- Enhanced Question Card -->
                <div id="questionCard" class="bg-white/10 backdrop-blur-sm rounded-xl p-6 mb-8 border border-white/20">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
                        <h3 class="text-xl md:text-2xl font-bold text-white french-text flex-1" id="questionText">
                            Comment dit-on "Bonjour" en franÃ§ais ?
                        </h3>
                        <div class="flex gap-3">
                            <span id="timeStamp" class="bg-blue-500/80 text-white px-3 py-2 rounded-full text-sm font-semibold whitespace-nowrap">
                                â° 00:00
                            </span>
                            <span id="questionNumber" class="bg-white/20 text-white px-3 py-2 rounded-full text-sm font-semibold">
                                1/20
                            </span>
                        </div>
                    </div>

                    <!-- Question Type Indicator -->
                    <div class="mb-4">
                        <span id="questionType" class="bg-purple-500/80 text-white px-3 py-1 rounded-full text-xs font-semibold">
                            ğŸ“ Ø³Ø¤Ø§Ù„ Ù…Ø¹Ø±ÙÙŠ
                        </span>
                    </div>

                    <div id="optionsContainer" class="space-y-4">
                        <!-- Options will be inserted here -->
                    </div>

                    <!-- Answer Feedback -->
                    <div id="feedbackContainer" class="hidden mt-6 p-4 rounded-lg"></div>
                </div>

                <!-- Enhanced Navigation -->
                <div class="flex flex-col md:flex-row justify-between gap-4">
                    <button id="prevBtn" onclick="previousQuestion()" 
                            class="bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-xl font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2" 
                            disabled>
                        â† Ø§Ù„Ø³Ø§Ø¨Ù‚
                    </button>
                    
                    <div class="flex gap-3">
                        <button id="hintBtn" onclick="showHint()" 
                                class="bg-yellow-500/80 hover:bg-yellow-600/80 text-white px-4 py-3 rounded-xl font-semibold transition-all">
                            ğŸ’¡ ØªÙ„Ù…ÙŠØ­
                        </button>
                        <button id="skipBtn" onclick="skipQuestion()" 
                                class="bg-gray-500/80 hover:bg-gray-600/80 text-white px-4 py-3 rounded-xl font-semibold transition-all">
                            â­ï¸ ØªØ®Ø·ÙŠ
                        </button>
                    </div>
                    
                    <button id="nextBtn" onclick="nextQuestion()" 
                            class="bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-6 py-3 rounded-xl font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2" 
                            disabled>
                        Ø§Ù„ØªØ§Ù„ÙŠ â†’
                    </button>
                </div>

                <!-- Quiz Stats -->
                <div class="mt-6 grid grid-cols-3 gap-4 text-center">
                    <div class="bg-white/10 rounded-lg p-3">
                        <div class="text-2xl font-bold text-green-400" id="correctAnswers">0</div>
                        <div class="text-xs text-white/70">Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø©</div>
                    </div>
                    <div class="bg-white/10 rounded-lg p-3">
                        <div class="text-2xl font-bold text-red-400" id="wrongAnswers">0</div>
                        <div class="text-xs text-white/70">Ø¥Ø¬Ø§Ø¨Ø§Øª Ø®Ø§Ø·Ø¦Ø©</div>
                    </div>
                    <div class="bg-white/10 rounded-lg p-3">
                        <div class="text-2xl font-bold text-yellow-400" id="skippedAnswers">0</div>
                        <div class="text-xs text-white/70">Ø£Ø³Ø¦Ù„Ø© Ù…ØªØ®Ø·Ø§Ø©</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Results Section -->
        <div id="resultsSection" class="hidden fade-in">
            <div class="glass-effect rounded-2xl shadow-xl p-8 text-center">
                <!-- Animated Success Icon -->
                <div class="mb-6 scale-in">
                    <div class="text-8xl mb-4 animate-bounce">ğŸ‰</div>
                    <h2 class="text-4xl font-bold text-white mb-2">ØªÙ‡Ø§Ù†ÙŠÙ†Ø§!</h2>
                    <p class="text-white/80 text-lg">Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­</p>
                </div>

                <!-- Enhanced Score Display -->
                <div class="bg-white/10 backdrop-blur-sm rounded-xl p-8 mb-8">
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="text-center">
                            <div class="text-5xl font-bold text-green-400 mb-2" id="finalScore">0/20</div>
                            <div class="text-lg text-white/70">Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</div>
                        </div>
                        <div class="text-center">
                            <div id="scorePercentage" class="text-5xl font-bold text-blue-400 mb-2">0%</div>
                            <div class="text-lg text-white/70">Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©</div>
                        </div>
                        <div class="text-center">
                            <div id="timeTaken" class="text-5xl font-bold text-purple-400 mb-2">0:00</div>
                            <div class="text-lg text-white/70">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø³ØªØºØ±Ù‚</div>
                        </div>
                    </div>
                </div>

                <!-- Level Badge with Animation -->
                <div class="mb-8">
                    <div id="levelBadge" class="level-badge inline-block px-8 py-4 rounded-full text-white font-bold text-xl shadow-lg">
                        ğŸŒŸ Ù…Ø³ØªÙˆÙ‰ Ù…ØªÙˆØ³Ø·
                    </div>
                </div>

                <!-- Detailed Performance Analysis -->
                <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 mb-8 text-right">
                    <h3 class="text-2xl font-bold text-white mb-6 text-center">ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø¯Ø§Ø¡</h3>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-xl font-bold text-white mb-4">ğŸ“ˆ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª:</h4>
                            <div id="performanceStats" class="space-y-3 text-white/80">
                                <!-- Stats will be inserted here -->
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="text-xl font-bold text-white mb-4">ğŸ“š ØªÙˆØµÙŠØ§Øª Ø§Ù„ØªØ­Ø³ÙŠÙ†:</h4>
                            <div id="recommendations" class="space-y-3 text-white/80">
                                <!-- Recommendations will be inserted here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Action Buttons -->
                <div class="flex flex-col md:flex-row gap-4 justify-center">
                    <button onclick="restartQuiz()" 
                            class="bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-8 py-4 rounded-xl font-bold text-lg transition-all transform hover:scale-105 shadow-lg">
                        ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
                    </button>
                   
                    <button onclick="backToVideo()" 
                            class="bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-8 py-4 rounded-xl font-bold text-lg transition-all transform hover:scale-105 shadow-lg">
                        ğŸ“¹ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙÙŠØ¯ÙŠÙˆ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <script>
        // Enhanced Quiz Data with more metadata
        const quizData = [
            {
                question: "Quel Ã¢ge a Betti dans la vidÃ©o ?",
                options: ["75 ans", "80 ans", "85 ans", "90 ans"],
                correct: 2,
                timeStamp: "00:06",
                type: "factual",
                hint: "Ã‰coutez attentivement au dÃ©but de la vidÃ©o",
                explanation: "Betti a 85 ans, comme mentionnÃ© au dÃ©but de la vidÃ©o."
            },
            {
                question: "Ã€ quel Ã©tage vit Betti ?",
                options: ["2e Ã©tage", "3e Ã©tage", "4e Ã©tage", "5e Ã©tage"],
                correct: 2,
                timeStamp: "00:06",
                type: "factual",
                hint: "Il n'y a pas d'ascenseur dans son immeuble",
                explanation: "Betti vit au 4e Ã©tage sans ascenseur."
            },
            {
                question: "Combien de kilomÃ¨tres Betti marche-t-elle chaque jour ?",
                options: ["5 km", "Plus de 10 km", "15 km", "20 km"],
                correct: 1,
                timeStamp: "00:09",
                type: "quantitative",
                hint: "C'est une distance impressionnante pour son Ã¢ge",
                explanation: "Betti marche plus de 10 kilomÃ¨tres chaque jour."
            },
            {
                question: "OÃ¹ Betti va-t-elle se rendre dans la vidÃ©o ?",
                options: ["Au marchÃ©", "Chez le mÃ©decin", "Au cimetiÃ¨re", "Ã€ la pharmacie"],
                correct: 2,
                timeStamp: "00:14",
                type: "contextual",
                hint: "C'est un lieu de recueillement",
                explanation: "Dans la vidÃ©o, Betti se rend au cimetiÃ¨re."
            },
            {
                question: "Quand Betti Ã©tait petite, oÃ¹ allait-elle Ã  l'Ã©cole ?",
                options: ["En ville", "Ã€ la campagne en Normandie", "Ã€ Paris", "En Bretagne"],
                correct: 1,
                timeStamp: "00:38",
                type: "biographical",
                hint: "Une rÃ©gion connue pour ses paysages ruraux",
                explanation: "Betti allait Ã  l'Ã©cole Ã  la campagne en Normandie."
            },
            // Continue with the rest of your questions...
            {
                question: "Combien de kilomÃ¨tres Betti faisait-elle pour aller Ã  l'Ã©cole ?",
                options: ["3-4 km", "5-6 km", "7-8 km", "10 km"],
                correct: 1,
                timeStamp: "00:41",
                type: "quantitative",
                hint: "Une distance considÃ©rable pour une enfant",
                explanation: "Betti faisait 5-6 kilomÃ¨tres pour aller Ã  l'Ã©cole."
            },
            // Add more questions with enhanced metadata...
        ];

        // Enhanced Application State
        class QuizApp {
            constructor() {
                this.currentQuestion = 0;
                this.userAnswers = [];
                this.score = 0;
                this.startTime = null;
                this.endTime = null;
                this.correctCount = 0;
                this.wrongCount = 0;
                this.skippedCount = 0;
                this.hintsUsed = 0;
                this.darkMode = false;
                
                this.init();
            }

            init() {
                this.hideLoadingScreen();
                this.setupEventListeners();
                this.setupPerformanceOptimizations();
            }

            hideLoadingScreen() {
                setTimeout(() => {
                    document.getElementById('loadingScreen').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('loadingScreen').style.display = 'none';
                    }, 300);
                }, 1000);
            }

            setupEventListeners() {
                // Dark mode toggle
                document.getElementById('darkModeToggle').addEventListener('click', () => {
                    this.toggleDarkMode();
                });

                // Keyboard navigation
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowLeft') this.previousQuestion();
                    if (e.key === 'ArrowRight') this.nextQuestion();
                    if (e.key === 'Enter') this.nextQuestion();
                    if (e.key === 'h' || e.key === 'H') this.showHint();
                });
            }

            setupPerformanceOptimizations() {
                // Preload critical resources
                const criticalElements = document.querySelectorAll('.will-change-transform');
                criticalElements.forEach(el => {
                    el.style.transform = 'translateZ(0)';
                });
            }

            toggleDarkMode() {
                this.darkMode = !this.darkMode;
                document.body.classList.toggle('dark-mode', this.darkMode);
                
                const toggle = document.getElementById('darkModeToggle');
                toggle.innerHTML = this.darkMode ? '<span class="text-2xl">â˜€ï¸</span>' : '<span class="text-2xl">ğŸŒ™</span>';
                
                this.showToast(this.darkMode ? 'ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ' : 'ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ', 'info');
            }

            showToast(message, type = 'success') {
                const toast = document.createElement('div');
                const colors = {
                    success: 'bg-green-500',
                    error: 'bg-red-500',
                    info: 'bg-blue-500',
                    warning: 'bg-yellow-500'
                };
                
                toast.className = `${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg transform transition-all duration-300 translate-x-full`;
                toast.textContent = message;
                
                const container = document.getElementById('toastContainer');
                container.appendChild(toast);
                
                // Animate in
                setTimeout(() => {
                    toast.classList.remove('translate-x-full');
                }, 100);
                
                // Remove after 3 seconds
                setTimeout(() => {
                    toast.classList.add('translate-x-full');
                    setTimeout(() => container.removeChild(toast), 300);
                }, 3000);
            }

            startQuiz() {
                document.getElementById('videoSection').classList.add('hidden');
                document.getElementById('quizSection').classList.remove('hidden');
                
                this.currentQuestion = 0;
                this.userAnswers = [];
                this.score = 0;
                this.startTime = new Date();
                this.correctCount = 0;
                this.wrongCount = 0;
                this.skippedCount = 0;
                this.hintsUsed = 0;
                
                this.displayQuestion();
                this.showToast('Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±! Ø­Ø¸Ø§Ù‹ Ù…ÙˆÙÙ‚Ø§Ù‹ ğŸ€', 'success');
            }

            displayQuestion() {
                const question = quizData[this.currentQuestion];
                
                // Update question content
                document.getElementById('questionText').textContent = question.question;
                document.getElementById('timeStamp').innerHTML = `â° ${question.timeStamp}`;
                document.getElementById('questionNumber').textContent = `${this.currentQuestion + 1}/${quizData.length}`;
                
                // Update question type
                const typeMap = {
                    factual: 'ğŸ“ Ø³Ø¤Ø§Ù„ Ù…Ø¹Ø±ÙÙŠ',
                    quantitative: 'ğŸ”¢ Ø³Ø¤Ø§Ù„ Ø±Ù‚Ù…ÙŠ',
                    contextual: 'ğŸ¯ Ø³Ø¤Ø§Ù„ Ø³ÙŠØ§Ù‚ÙŠ',
                    biographical: 'ğŸ‘¤ Ø³Ø¤Ø§Ù„ Ø´Ø®ØµÙŠ'
                };
                document.getElementById('questionType').textContent = typeMap[question.type] || 'ğŸ“ Ø³Ø¤Ø§Ù„ Ù…Ø¹Ø±ÙÙŠ';
                
                // Generate options
                const optionsContainer = document.getElementById('optionsContainer');
                optionsContainer.innerHTML = '';
                
                question.options.forEach((option, index) => {
                    const button = document.createElement('button');
                    const isFrench = this.detectFrenchText(option);
                    
                    button.className = `option-button w-full p-4 border-2 border-white/30 rounded-xl hover:border-white/60 transition-all text-lg font-medium ${isFrench ? 'french-text' : 'text-left'}`;
                    button.textContent = option;
                    button.onclick = () => this.selectAnswer(index, button);
                    
                    // Add option letter
                    const optionLetter = String.fromCharCode(65 + index);
                    const letterSpan = document.createElement('span');
                    letterSpan.className = 'bg-white/20 text-white px-2 py-1 rounded-full text-sm mr-3';
                    letterSpan.textContent = optionLetter;
                    button.insertBefore(letterSpan, button.firstChild);
                    
                    optionsContainer.appendChild(button);
                });

                // Update progress
                const progress = ((this.currentQuestion + 1) / quizData.length) * 100;
                document.getElementById('progressText').textContent = `${this.currentQuestion + 1} Ù…Ù† ${quizData.length}`;
                document.getElementById('progressBar').style.width = `${progress}%`;
                document.getElementById('progressPercentage').textContent = `${Math.round(progress)}%`;
                
                // Update navigation
                document.getElementById('prevBtn').disabled = this.currentQuestion === 0;
                document.getElementById('nextBtn').disabled = this.userAnswers[this.currentQuestion] === undefined;
                
                // Hide feedback
                document.getElementById('feedbackContainer').classList.add('hidden');
                
                // Update stats
                this.updateStats();
                
                // Restore previous answer if exists
                if (this.userAnswers[this.currentQuestion] !== undefined) {
                    const buttons = document.querySelectorAll('.option-button');
                    this.selectAnswer(this.userAnswers[this.currentQuestion], buttons[this.userAnswers[this.currentQuestion]]);
                }
            }

            detectFrenchText(text) {
                const frenchPatterns = [
                    /[Ã Ã¢Ã¤Ã©Ã¨ÃªÃ«Ã¯Ã®Ã´Ã¶Ã¹Ã»Ã¼Ã¿Ã§]/i, // French accents
                    /\b(le|la|les|un|une|des|du|de|et|ou|mais|donc|car|ni|or|est|sont|avoir|Ãªtre|aller|faire|dire|voir|savoir|pouvoir|falloir|vouloir|venir|prendre|donner|parler|aimer|temps|personne|annÃ©e|jour|fois|main|vie|moment|pays|question|cas|part|lieu|milieu|faÃ§on|homme|enfant|monde|famille|groupe|problÃ¨me|service|fin|sociÃ©tÃ©|conseil|effet|situation|action|entreprise|force|attention|relation|travail|dÃ©veloppement|histoire|politique|rÃ©sultat|place|rÃ©alitÃ©|raison|Ã©tat|niveau|sens|projet|prix|point|recherche|organisation|systÃ¨me|programme|parole|nombre|eau|cause|voix|corps|maison|route|centre|image|droit|condition|moyen|gouvernement|crÃ©ation|formation|direction|production|gestion|utilisation|administration|communication|information|construction|protection|Ã©ducation|transformation|dÃ©cision|position|disposition|proposition|composition|opposition|comparaison|division|union|rÃ©union|action|fonction|mention|intention|attention|extension|dimension|expression|impression|discussion|mission|transmission|permission|commission|profession|possession|succession|procession|progression|rÃ©gression|agression|depression|compression|suppression|oppression|rÃ©pression|concession|rÃ©cession|session|passion|compassion|fashion|nation|station|vacation|occupation|prÃ©occupation|application|explication|implication|complication|publication|multiplication|simplification|classification|qualification|quantification|identification|modification|diversification|specification|verification|clarification|purification|amplification|glorification|notification|certification|ratification|satisfaction|fraction|action|attraction|extraction|contraction|dÃ©traction|abstraction|distraction|interaction|transaction|rÃ©action|crÃ©ation|rÃ©crÃ©ation|procrÃ©ation|gÃ©nÃ©ration|rÃ©gÃ©nÃ©ration|dÃ©gÃ©nÃ©ration|vÃ©nÃ©ration|modÃ©ration|considÃ©ration|dÃ©sespÃ©ration|exagÃ©ration|accÃ©lÃ©ration|dÃ©cÃ©lÃ©ration|tempÃ©rature|littÃ©rature|culture|nature|aventure|mesure|figure|blessure|nourriture|ouverture|fermeture|couverture|dÃ©couverte|libertÃ©|propriÃ©tÃ©|sociÃ©tÃ©|variÃ©tÃ©|nouveautÃ©|beautÃ©|spÃ©cialitÃ©|rÃ©alitÃ©|qualitÃ©|quantitÃ©|capacitÃ©|facilitÃ©|difficultÃ©|possibilitÃ©|impossibilitÃ©|probabilitÃ©|responsabilitÃ©|disponibilitÃ©|compatibilitÃ©|incompatibilitÃ©|instabilitÃ©|immobilitÃ©|mobilitÃ©|utilitÃ©|inutilitÃ©|gratuitÃ©|sÃ©curitÃ©|insÃ©curitÃ©|puretÃ©|impuretÃ©|maturitÃ©|immaturitÃ©|autoritÃ©|prioritÃ©|minoritÃ©|majoritÃ©|supÃ©rioritÃ©|infÃ©rioritÃ©|antÃ©rioritÃ©|postÃ©rioritÃ©|intÃ©rioritÃ©|extÃ©rioritÃ©)/i
                ];
                
                return frenchPatterns.some(pattern => pattern.test(text));
            }

            selectAnswer(answerIndex, buttonElement) {
                // Remove previous selections
                document.querySelectorAll('.option-button').forEach(btn => {
                    btn.classList.remove('selected');
                });
                
                // Highlight selected answer
                buttonElement.classList.add('selected');
                
                this.userAnswers[this.currentQuestion] = answerIndex;
                document.getElementById('nextBtn').disabled = false;
                
                // Show immediate feedback (optional)
                this.showAnswerFeedback(answerIndex);
            }

            showAnswerFeedback(answerIndex) {
                const question = quizData[this.currentQuestion];
                const isCorrect = answerIndex === question.correct;
                const feedback = document.getElementById('feedbackContainer');
                
                feedback.className = `mt-6 p-4 rounded-lg ${isCorrect ? 'bg-green-500/20 border border-green-500/30' : 'bg-yellow-500/20 border border-yellow-500/30'}`;
                feedback.innerHTML = `
                    <div class="flex items-center gap-3">
                        <span class="text-2xl">${isCorrect ? 'âœ…' : 'â„¹ï¸'}</span>
                        <div>
                            <div class="font-semibold text-white">${isCorrect ? 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©!' : 'ØªÙØ³ÙŠØ±:'}</div>
                            <div class="text-white/80 mt-1">${question.explanation}</div>
                        </div>
                    </div>
                `;
                feedback.classList.remove('hidden');
            }

            showHint() {
                const question = quizData[this.currentQuestion];
                if (question.hint) {
                    this.hintsUsed++;
                    this.showToast(`ğŸ’¡ ØªÙ„Ù…ÙŠØ­: ${question.hint}`, 'info');
                }
            }

            skipQuestion() {
                this.userAnswers[this.currentQuestion] = -1; // -1 indicates skipped
                this.skippedCount++;
                this.nextQuestion();
                this.showToast('ØªÙ… ØªØ®Ø·ÙŠ Ø§Ù„Ø³Ø¤Ø§Ù„', 'warning');
            }

            nextQuestion() {
                if (this.userAnswers[this.currentQuestion] !== undefined) {
                    if (this.currentQuestion < quizData.length - 1) {
                        this.currentQuestion++;
                        this.displayQuestion();
                    } else {
                        this.finishQuiz();
                    }
                }
            }

            previousQuestion() {
                if (this.currentQuestion > 0) {
                    this.currentQuestion--;
                    this.displayQuestion();
                }
            }

            updateStats() {
                document.getElementById('correctAnswers').textContent = this.correctCount;
                document.getElementById('wrongAnswers').textContent = this.wrongCount;
                document.getElementById('skippedAnswers').textContent = this.skippedCount;
            }

            finishQuiz() {
                this.endTime = new Date();
                
                // Calculate final scores
                this.score = 0;
                this.correctCount = 0;
                this.wrongCount = 0;
                this.skippedCount = 0;
                
                for (let i = 0; i < quizData.length; i++) {
                    if (this.userAnswers[i] === quizData[i].correct) {
                        this.score++;
                        this.correctCount++;
                    } else if (this.userAnswers[i] === -1) {
                        this.skippedCount++;
                    } else if (this.userAnswers[i] !== undefined) {
                        this.wrongCount++;
                    }
                }
                
                this.showResults();
                this.createConfetti();
            }

            showResults() {
                document.getElementById('quizSection').classList.add('hidden');
                document.getElementById('resultsSection').classList.remove('hidden');
                
                const percentage = Math.round((this.score / quizData.length) * 100);
                const timeTaken = this.formatTime((this.endTime - this.startTime) / 1000);
                
                // Update score displays
                document.getElementById('finalScore').textContent = `${this.score}/${quizData.length}`;
                document.getElementById('scorePercentage').textContent = `${percentage}%`;
                document.getElementById('timeTaken').textContent = timeTaken;
                
                // Generate level and recommendations
                const { level, recommendations, stats } = this.generatePerformanceAnalysis(percentage);
                
                document.getElementById('levelBadge').textContent = level;
                
                // Update performance stats
                const statsContainer = document.getElementById('performanceStats');
                statsContainer.innerHTML = stats.map(stat => 
                    `<div class="flex justify-between items-center p-2 bg-white/5 rounded">
                        <span>${stat.label}:</span>
                        <span class="font-bold">${stat.value}</span>
                    </div>`
                ).join('');
                
                // Update recommendations
                const recommendationsContainer = document.getElementById('recommendations');
                recommendationsContainer.innerHTML = recommendations.map(rec => 
                    `<div class="p-2 bg-white/5 rounded">${rec}</div>`
                ).join('');
            }

            generatePerformanceAnalysis(percentage) {
                let level, recommendations;
                
                if (percentage >= 90) {
                    level = "ğŸ† Ù…Ø³ØªÙˆÙ‰ Ù…Ù…ØªØ§Ø²";
                    recommendations = [
                        "â€¢ Ø±Ø§Ø¦Ø¹! Ø£Ù†Øª ØªØªÙ‚Ù† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø¨Ø´ÙƒÙ„ Ù…Ù…ØªØ§Ø²",
                        "â€¢ Ø¬Ø±Ø¨ Ø§Ù„ØªØ­Ø¯Ø« Ù…Ø¹ Ù…ØªØ­Ø¯Ø«ÙŠÙ† Ø£ØµÙ„ÙŠÙŠÙ† Ù„Ù„ØºØ© Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©",
                        "â€¢ Ø§Ø¨Ø¯Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØµØ­Ù ÙˆØ§Ù„Ù…Ø¬Ù„Ø§Øª Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©",
                        "â€¢ Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø£ÙÙ„Ø§Ù… Ø§Ù„ÙØ±Ù†Ø³ÙŠØ© Ø¨Ø¯ÙˆÙ† ØªØ±Ø¬Ù…Ø©"
                    ];
                } else if (percentage >= 80) {
                    level = "ğŸŒŸ Ù…Ø³ØªÙˆÙ‰ Ù…ØªÙ‚Ø¯Ù…";
                    recommendations = [
                        "â€¢ Ù…Ù…ØªØ§Ø²! Ù…Ø³ØªÙˆØ§Ùƒ Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹ ÙÙŠ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª",
                        "â€¢ Ø¬Ø±Ø¨ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø£ÙÙ„Ø§Ù… ÙØ±Ù†Ø³ÙŠØ© Ù…Ø¹ ØªØ±Ø¬Ù…Ø©",
                        "â€¢ Ø§Ø¨Ø¯Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© ÙƒØªØ¨ Ø¨Ø³ÙŠØ·Ø© Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©",
                        "â€¢ Ø§Ù†Ø¶Ù… Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ù…Ø­Ø§Ø¯Ø«Ø© ÙØ±Ù†Ø³ÙŠØ© Ø¹Ø¨Ø± Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª"
                    ];
                } else if (percentage >= 60) {
                    level = "ğŸ“š Ù…Ø³ØªÙˆÙ‰ Ù…ØªÙˆØ³Ø·";
                    recommendations = [
                        "â€¢ Ù…Ø³ØªÙˆÙ‰ Ø¬ÙŠØ¯! ØªØ­ØªØ§Ø¬ Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªØ¯Ø±ÙŠØ¨",
                        "â€¢ Ø±Ø§Ø¬Ø¹ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ØªØ­ÙŠØ§Øª ÙˆØ§Ù„Ø¹Ø¨Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©",
                        "â€¢ Ø§Ø³ØªÙ…Ø¹ Ù„Ø¨ÙˆØ¯ÙƒØ§Ø³Øª ÙØ±Ù†Ø³ÙŠ Ù„Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ†",
                        "â€¢ ØªØ¯Ø±Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø·Ù‚ ÙŠÙˆÙ…ÙŠØ§Ù‹ Ù„Ù…Ø¯Ø© 15 Ø¯Ù‚ÙŠÙ‚Ø©"
                    ];
                } else {
                    level = "ğŸŒ± Ù…Ø³ØªÙˆÙ‰ Ù…Ø¨ØªØ¯Ø¦";
                    recommendations = [
                        "â€¢ Ù„Ø§ ØªÙ‚Ù„Ù‚ØŒ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø¯Ø§Ø¦Ù…Ø§Ù‹ ØµØ¹Ø¨Ø©!",
                        "â€¢ Ø±ÙƒØ² Ø¹Ù„Ù‰ ØªØ¹Ù„Ù… Ø§Ù„Ø¹Ø¨Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹",
                        "â€¢ Ø§Ø³ØªØ®Ø¯Ù… ØªØ·Ø¨ÙŠÙ‚Ø§Øª ØªØ¹Ù„Ù… Ø§Ù„Ù„ØºØ© Ù…Ø«Ù„ Duolingo",
                        "â€¢ Ø´Ø§Ù‡Ø¯ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ù„Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ† ÙŠÙˆÙ…ÙŠØ§Ù‹"
                    ];
                }
                
                const stats = [
                    { label: "Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©", value: `${this.correctCount}/${quizData.length}` },
                    { label: "Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø®Ø§Ø·Ø¦Ø©", value: this.wrongCount },
                    { label: "Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…ØªØ®Ø·Ø§Ø©", value: this.skippedCount },
                    { label: "Ø§Ù„ØªÙ„Ù…ÙŠØ­Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©", value: this.hintsUsed },
                    { label: "Ù…ØªÙˆØ³Ø· Ø§Ù„ÙˆÙ‚Øª/Ø³Ø¤Ø§Ù„", value: this.formatTime(((this.endTime - this.startTime) / 1000) / quizData.length) }
                ];
                
                return { level, recommendations, stats };
            }

            formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            }

            createConfetti() {
                for (let i = 0; i < 50; i++) {
                    setTimeout(() => {
                        const confetti = document.createElement('div');
                        confetti.className = 'confetti';
                        confetti.style.left = Math.random() * 100 + 'vw';
                        confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                        confetti.textContent = ['ğŸ‰', 'ğŸŠ', 'â­', 'ğŸŒŸ', 'âœ¨'][Math.floor(Math.random() * 5)];
                        confetti.style.fontSize = (Math.random() * 20 + 20) + 'px';
                        
                        document.body.appendChild(confetti);
                        
                        setTimeout(() => {
                            if (confetti.parentNode) {
                                confetti.parentNode.removeChild(confetti);
                            }
                        }, 5000);
                    }, i * 100);
                }
            }

            shareResults() {
                const percentage = Math.round((this.score / quizData.length) * 100);
                const shareText = `Ù„Ù‚Ø¯ Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ${this.score}/${quizData.length} (${percentage}%) ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± ØªØ¹Ù„Ù… Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©! ğŸ‡«ğŸ‡·`;
                
                if (navigator.share) {
                    navigator.share({
                        title: 'Ù†ØªØ§Ø¦Ø¬ Ø§Ø®ØªØ¨Ø§Ø± ØªØ¹Ù„Ù… Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©',
                        text: shareText,
                        url: window.location.href
                    });
                } else {
                    navigator.clipboard.writeText(shareText + ' ' + window.location.href)
                        .then(() => this.showToast('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©!', 'success'))
                        .catch(() => this.showToast('ÙØ´Ù„ ÙÙŠ Ù†Ø³Ø® Ø§Ù„Ù†ØªØ§Ø¦Ø¬', 'error'));
                }
            }

            restartQuiz() {
                this.currentQuestion = 0;
                this.userAnswers = [];
                this.score = 0;
                this.startTime = null;
                this.endTime = null;
                this.correctCount = 0;
                this.wrongCount = 0;
                this.skippedCount = 0;
                this.hintsUsed = 0;
                
                document.getElementById('resultsSection').classList.add('hidden');
                this.startQuiz();
            }

            backToVideo() {
                document.getElementById('resultsSection').classList.add('hidden');
                document.getElementById('videoSection').classList.remove('hidden');
            }
        }

        // Initialize the application
        let quizApp;
        document.addEventListener('DOMContentLoaded', () => {
            quizApp = new QuizApp();
        });

        // Global functions for button onclick handlers
        function startQuiz() { quizApp.startQuiz(); }
        function nextQuestion() { quizApp.nextQuestion(); }
        function previousQuestion() { quizApp.previousQuestion(); }
        function showHint() { quizApp.showHint(); }
        function skipQuestion() { quizApp.skipQuestion(); }
        function restartQuiz() { quizApp.restartQuiz(); }
        function backToVideo() { quizApp.backToVideo(); }
        function shareResults() { quizApp.shareResults(); }
    </script>
</body>
</html>




